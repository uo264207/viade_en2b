{"version":3,"sources":["components/generic_components/GenericButton.js","Entities/GeoCoordinate.js","Entities/BasicRoute.js","data-access/FileManager/AclCreator.js","data-access/FileManager/RouteUpload.js","CommentsManager/AddComment.js","CommentsManager/CreateCommentsFile.js","Entities/Comment.js","CommentsManager/GetComments.js","data-access/gateways/CommentsGateway.js","RouteManager/CreateRoute.js","RouteManager/CreateRouteRealTime.js","components/generic_components/FloatingButton.js","caches/ConfigCache.js","components/generic_components/ThemeSwitch.js","components/generic_components/BurgerMenu.js","components/map_components/MapStyles.js","ApiKey.js","Entities/File.js","Entities/RouteFile.js","RouteManager/ListUserRoutes.js","RouteManager/DeleteUserRoute.js","RouteManager/UpdateRoute.js","data-access/gateways/RouteGateway.js","data-access/FileManager/FileUtils.js","data-access/FileManager/FileUpload.js","data-access/FileManager/FileLink.js","data-access/gateways/FileGateway.js","caches/fileCache/FileCache.js","caches/routeCache/RouteCache.js","components/generic_components/CustomLoader.js","components/map_components/MapContainer.js","components/spec_components/MultimediaViewer.js","components/spec_components/Dropzone.js","components/pages/DropzonePage.js","components/spec_components/SaveRoute.js","components/pages/SaveRoutePage.js","Entities/Friend.js","data-access/UserData.js","caches/friendCache/FriendCache.js","components/spec_components/UserDropdown.js","components/pages/MainPage.js","data-access/FileManager/FolderCreator.js","components/login/Login.js","components/pages/LoginPage.js","components/generic_components/Card.js","components/pages/FriendList.js","components/generic_components/SearchBar.js","components/generic_components/MyForm.js","components/generic_components/InfiniteScrollComment.js","components/generic_components/InfiniteScrollImage.js","components/generic_components/InfiniteScrollVideo.js","components/generic_components/MyTab.js","components/pages/RouteDetails.js","RouteManager/ListSpecificUserRoutes.js","ShareManager/RetrieveRoute.js","components/pages/RoutesPage.js","components/pages/AboutPage.js","Entities/Notification.js","caches/notificationCache/NotificationCache.js","NotificationManager/NotificationManager.js","components/pages/NotificationsPage.js","data-access/FileManager/GPXparser.js","components/pages/ImportGpxPage.js","FriendGroupManager/CreateFriendGroup.js","FriendGroupManager/GetFriendGroup.js","FriendGroupManager/FriendGroupManager.js","caches/friendGroupCache/FriendGroupCache.js","components/pages/FriendGroupsPage.js","components/pages/SeeFriendsOfGroupPage.js","components/generic_components/CustomListButton.js","components/pages/CreateFriendGroupPage.js","util/PermissionManager.js","ShareManager/ShareRoute.js","components/pages/ShareRoutePage.js","App.js","index.js"],"names":["GenericButton","className","this","props","name","onClick","message","Component","GeoCoordinate","latitude","longitude","lat","lng","BasicRoute","geoCoordinates","description","Array","from","url","jsonFormat","commentsUrl","comments","fileClient","SolidFileClient","auth","enableLogging","createContentAcl","nameResource","a","withoutSpaces","trim","aclString","resource","console","log","createFile","then","catch","error","createContentAclInbox","alert","createContentAclMedia","text","uploadRoute","session","undefined","webId","Error","file","File","type","path","split","buildPath","AddComment","callback","require","FC","fc","currentSession","JSON","stringify","status","CreateCommentsFile","routeName","substring","length","emptyCommentFile","comment","author","dateCreated","viade","xsd","Comment","fileUrl","sender","date","jsonComment","LoadRouteComments","route","loadCommentsJson","commentsJson","parseJsonToEntity","itemExists","readFile","content","json","parse","commentsArray","i","newComment","push","createCommentsFile","commentFileCreator","loader","loadComments","postCommentInRoute","routeComUrl","today","Date","getFullYear","getMonth","getDate","time","getHours","getMinutes","getSeconds","dateTime","postComment","addComment","getRouteInString","str","RouteUpload","aux","map","includes","main","routeIsOver","putNameToRoute","getRouteNotUpload","localStorage","setItem","getRoute","nameRoute","descriptionRoute","coords","checkCoordsAlreadyExist","r","CreateRoute","navigator","geolocation","getCurrentPosition","position","putCoords","options","sleep","long","addCoords","ms","Promise","resolve","setTimeout","err","warn","code","enableHighAccuracy","timeout","maximumAge","FloatingButton","history","useHistory","useState","recording","setRecording","event","icon","showUpload","toast","info","draggable","POSITION","TOP_CENTER","RealTimeRoute","dark","switchTheme","toggleTheme","ConfigCache","document","documentElement","setAttribute","ThemeSwitch","id","defaultChecked","BurgerMenu","preventDefault","disableAutoFocus","pageWrapId","outerContainerId","container","tabIndex","src","to","getStyle","getKey","filePath","dateAttached","contentType","mime","getType","RouteFile","routePath","files","filter","fp","RoutesLoader","routes","urls","routesFolder","readFolder","fileContent","rou","jsonToEntity","routesToJson","tempRoute","points","comUrl","setUrl","setJsonFormat","jsonRoutes","e","splice","entRoutes","entFiles","table","it","desc","hasOwnProperty","media","getMediaAttachedToRoute","routeFile","addFilePath","DeleteUserRoute","popupLogin","popupUri","urlRoute","nameRoutes","delete","urlProvided","urlFromPod","RouteCache","deleteRouteByName","updateRoute","findByName","routesLoader","loadRouteByName","findAll","loadUserRoutesFiles","updateByName","cacheRoute","newRouteData","foundRoute","UpdateRoute","updatePod","handleFetchError","detailedErrorMessage","displayErrorMessage","group","Response","displayMessages","stack","groupEnd","uploadFiles","fileList","reject","validContentType","promises","updateFile","all","putFile","valid","forEach","fileItem","isImage","toString","isVideo","patterns","image","test","video","checkLinkableRoute","storageRoot","linkFilesToRoute","fileUris","buildRouteFolderPath","attachementDate","toISOString","viadeRoutes","match","fileUri","FileLink","FileUpload","filePaths","removeFileAttached","routeCache","getSelected","found","find","rf","filesMap","addFilePaths","routeFiles","removeFile","hasPath","removeFilePath","getFilePathsForRoute","selected","selectedDetails","routeToUpload","reload","selectedToShare","sharedRoutes","getSharedRoutes","setSharedRoutes","getSelectedToShare","setSelectedToShare","getSelectedToUpload","setSelectedToUpload","addRoute","obj","Object","assign","deleteRoute","RouteGateway","updatedRoute","sort","r1","r2","getRoutes","foundRoutes","FileCache","setSelected","foundShare","clear","setSelectedDetails","getSelectedDetails","setReload","CustomLoader","color","React","MapContainer","center","zoom","viewLoaded","ruta","getItem","puntos","punto","parseFloat","removeItem","Math","floor","google","styles","streetViewControl","mapTypeControl","fullscreenControl","zoomControl","initialCenter","strokeColor","strokeOpacity","strokeWeight","title","opacity","state","loading","cache","rutita","setState","Fragment","GoogleApiWrapper","apiKey","language","MultimediaViewer","item","element","extension","index","key","getIcon","Dropzone","hightlight","fileInputRef","createRef","openFileDialog","bind","onFilesAdded","onDragOver","onDragLeave","onDrop","onUpload","disabled","hideUpload","highlight","current","click","evt","target","array","fileListToArray","dataTransfer","list","style","cursor","ref","multiple","onChange","alt","value","DropzonePage","handleClick","node","contains","addEventListener","removeEventListener","params","SaveRoute","onFinish","htmlFor","nameToRute","rows","cols","descriptionToRoute","saveRouteToPod","SaveRoutePage","width","height","Friend","profilePicture","webIdString","data","default","GetUserFriends","friends","useLDflexList","friendsAux","friendLDflexValue","friendWebIdLDflexValue","GetSpecificName","GetSpecificProfileImage","profilePic","friendAux","profileCardMe","personName","GetSpecificWebId","vcard_hasPhoto","photo","loadFriends","getFriends","UserDropdown","clicked","getProfileImage","foto","getProfileName","user","userImage","userName","padding","MainPage","showDropzone","setShowDropzone","showZone","routecache","createFolders","inbox","shared","groups","resources","createFolder","Login","viewImageLoaded","prevProps","prevState","folderCreator","logout","friendCache","data-tilt","LoggedOut","placeholder","popup","LoggedIn","LoginPage","CardLayout","linkHide","link","externalHide","externalLink","detailsHide","detailsLink","shareHide","shareIconName","Card","rel","href","Image","Content","Header","header","Meta","Description","extra","classLink","hidden","action","Popup","trigger","Icon","iconName","mouseEnterDelay","popupContent","externalClassName","externalAction","externalIconName","externalPopupContent","detailsClassName","detailsAction","detailsIconName","detailsPopupContent","shareAction","FriendsPage","numberOfFriends","SearchBar","MyForm","handleChange","handleSubmit","gateway","Form","onSubmit","Group","TextArea","Button","MyCommentInfiniteScroll","items","slice","array_index","hasMore","fetchMoreData","concat","dataLength","next","endMessage","textAlign","scrollableTarget","scrollParent","Author","as","Metadata","Text","MyImageInfiniteScroll","toDateString","MyVideoInfiniteScroll","controls","images","videos","MyTab","panes","menuItem","pane","overflow","comentarios","multimedia","Tab","renderActiveOnly","RouteDetails","details","handleSession","detail","loadSpecificUserRoutesFiles","routesURL","sharedPath","retrieveSharedRoutes","routes_routes","routes_files","filecache","routesJSONS","urlsToReturn","jsonURLRetrieve","toJson","routesShared","routesRetrieved","routeURL","routeA","RoutesPage","filteredRoutes","toLowerCase","indexOf","search","filteredSharedRoutes","showDetails","getDetailsZone","updateSearch","viewDetails","viewCharge","substr","rutas","sharedRoutesList","AboutPage","meta","Notification","urlNotification","typeNotification","urlResource","authorName","authorWebId","notifications","getNotifications","setNotifications","result","$rdf","ns","request","inboxPath","webIdAuthor","fetchDocument","containerDoc","subject","getSubject","containerURLS","getAllRefs","ldp","doc","summary","getString","processNotificationInfo","notification","deleteNotification","profile","webIdForName","addToSharedFolder","myWebId","addRouteToFile","createFileShared","routeJson","functionCreateSharedFileContent","postNotification","webIdFriend","uuid","lastElement","method","uri","body","headers","slug","response","createNotificationContent","createNotificationSummary","webIdTo","NotificationsPage","getNotificationDocuments","reader","FileReader","onload","string","routeString","imported","parseToJsonldAndUpload","parseGpx","gpxData","tracks","track","segments","segment","trackPoint","lon","getPoints","parseRoute","readAsText","read","ImportGpxPage","GPXparser","empty","addToNewGroup","friend","addtogroup","groupId","creategroup","users","groupname","new_id","create_UUID","namefile","group_folder","group_template","checkexistance","identifier","propertyID","schema","dt","getTime","replace","c","random","getUserGroupFriends","ur","finalName","checkAclOrCreateMedia","jsonify","setGroups","groupsfinal","mediaName","creator","groupSelected","groups_param","getGroups","friendmanager","setGroupSelected","getGroupSelected","FriendGroupsPage","selectDetails","group_final","some","friendcache","CustomButtomList","executeAction","aria-hidden","friendsToGroup","CreateFriendGroupPage","CustomListButton","manageFriendsToGroup","nameToGroup","getFriendsToGroup","nameGroup","window","location","friendWebId","SolidAclUtils","AclApi","Permissions","Agents","READ","WRITE","APPEND","CONTROL","setPermissionsTo","permission","urlToShare","mode","getMode","fetch","utils","autoSave","loadFromFileUrl","acl","permissions","add","agents","addWebId","addRule","checkPermissions","getPermissionsFor","has","profileFriend","profileAuthor","routeAtt","uuidv4","checkAclOrCreate","routeEntity","contenido","ShareRoutePage","ShareWith","App","render","performance","navigation","charAt","closeOnClick","transition","Bounce","autoClose","exact","component","SeeFriendsOfGroupPage","autoPlay","muted","ReactDOM","getElementById"],"mappings":"25BAgBeA,G,8KATb,OACI,4BAAQC,UAAWC,KAAKC,MAAMF,UAAWG,KAAMF,KAAKC,MAAMC,KAAMC,QAASH,KAAKC,MAAME,SAClFH,KAAKC,MAAMG,a,GALSC,c,0CCJPC,EACjB,WAAYC,EAAUC,GAAY,oBAC9BR,KAAKS,IAAMF,EACXP,KAAKU,IAAMF,GCHEG,E,WACnB,WAAYT,EAAMU,EAAgBC,GAAc,oBAC9Cb,KAAKE,KAAOA,EACZF,KAAKa,YAAcA,EACnBb,KAAKY,eAAiBE,MAAMC,KAAKH,GACjCZ,KAAKgB,IAAM,GACXhB,KAAKiB,WAAa,GAClBjB,KAAKkB,YAAY,GACjBlB,KAAKmB,SAAW,G,mDAGXH,GACLhB,KAAKgB,IAAMA,I,oCAGCC,GACZjB,KAAKiB,WAAaA,I,gCAIlB,OAAOjB,KAAKiB,e,8BCfVG,G,OAAa,IAAIC,IAAgBC,EAAM,CAAEC,eAAe,KAGvD,SAAeC,EAAtB,oC,4CAAO,WAAgCR,EAAKS,GAArC,mBAAAC,EAAA,6DAEDC,EAAgBF,EAAaG,OAG7BC,EALC,yFAGDC,EAAWH,EAAe,GAHzB,qKAcaG,EAdb,sDAgBYA,EAhBZ,wDAmBLC,QAAQC,IAAIH,GAnBP,kBAqBGT,EAAWa,WAAWjB,EAAM,OAAQa,EAAW,eAAeK,OAAOC,OAAM,SAACC,GAAWL,QAAQC,IAAI,oEAAoEhB,EAAMS,MArBhL,OAsBHM,QAAQC,IAAI,eAAehB,GAtBxB,kDAyBHe,QAAQC,IAAI,+BAzBT,2D,sBA6BA,SAAeK,EAAtB,kC,4CAAO,WAAqCrB,GAArC,eAAAU,EAAA,6DACDG,EADC,8eAsBLE,QAAQC,IAAIH,GAtBP,kBAwBGT,EAAWa,WAAWjB,EAAM,OAAQa,EAAW,eAAeK,OAAOC,OAAM,SAACC,GAAWL,QAAQC,IAAI,wEAxBtG,OAyBHD,QAAQC,IAAI,qBAzBT,gDA2BHM,MAAM,EAAD,IA3BF,0D,sBAgCA,SAAeC,EAAtB,oC,4CAAO,WAAqCvB,EAAKS,GAA1C,iBAAAC,EAAA,6DAEDC,EAAgBF,EAAaG,OAG7BC,EALC,iOAGUF,EAAe,GAHzB,8EAiBLI,QAAQC,IAAIH,GAjBP,kBAmBGT,EAAWa,WAAWjB,EAAM,OAAQa,EAAW,eAAeK,OAAOC,OAAM,SAACC,GAAWL,QAAQC,IAAI,oEAAoEhB,EAAMS,MAnBhL,OAoBHM,QAAQC,IAAI,eAAehB,GApBxB,kDAuBHe,QAAQC,IAAI,+BAvBT,2D,sBClEP,IAAMZ,EAAa,IAAIC,IAAgBC,EAAM,CAAEC,eAAe,IAE/C,WACRrB,EAAMsC,I,sCACTC,CAAYvC,EAAMsC,I,4CAGtB,WAA2BtC,EAAMsC,GAAjC,qBAAAd,EAAA,sEACsBJ,mBADtB,WACMoB,EADN,cAEoCC,IAAlBD,EAAQE,OAAyC,OAAlBF,EAAQE,MAFzD,sBAGU,IAAIC,MAAM,0BAHpB,cAMMC,EAAO,IAAIC,KAAK,CAACP,GAAOtC,EAAO,UAAW,CAC5C8C,KAAM,wBAGJC,EAAOP,EAAQE,MAAMM,MAAM,WAAW,GAEtCC,EAZN,UAYqBF,EAZrB,wBAYyCH,EAAK5C,MAZ9C,UAcQkB,EAAWa,WAAWkB,EAAWL,EAAMA,EAAKE,MAdpD,QAiBET,EAAsBY,EAAWL,EAAK5C,MAjBxC,6C,0BCVqBkD,E,4IAEApC,EAAIG,EAASkC,G,oFAEpB/B,EAAOgC,EAAQ,IACfC,EAAKD,EAAQ,IACbE,EAAK,IAAID,EAAGjC,G,SAEEA,EAAKmC,iB,WAArBf,E,cAE8BC,IAAlBD,EAAQE,OAAyC,OAAlBF,EAAQE,M,uBACnDS,I,mBACO,G,iCAIDG,EAAGvB,WAAWjB,EAAK0C,KAAKC,UAAUxC,GAAW,c,kCAC5C,G,yCAIPY,QAAQC,IAAI,mDACZD,QAAQC,IAAR,MACAD,QAAQC,IAAI,KAAM4B,QAClB7B,QAAQC,IAAI,KAAM5B,S,mBACX,G,4HCzBEyD,E,oJACMC,EAAWT,G,wFAE5B/B,EAAOgC,EAAQ,IACfC,EAAKD,EAAQ,IACbE,EAAK,IAAID,EAAGjC,G,SAEEA,EAAKmC,iB,cAArBf,E,cAE8BC,IAAlBD,EAAQE,OAAyC,OAAlBF,EAAQE,OACrDS,I,SAIIrC,EACF0B,EAAQE,MAAMmB,UAAU,EAAGrB,EAAQE,MAAMoB,OAAS,IAClD,mBACAF,EACA,WACEG,EAAmB,CACrB,WAAY,CACV,WAAY,IACZ9C,SAAU,CACR,aAAc,QACd,MAAO,kBAET+C,QAAS,CACP,MAAO,gBACP,QAAS,OAEXC,OAAQ,CAAE,MAAO,gBAAiB,QAAS,OAC3CC,YAAa,CACX,MAAO,oBACP,QAAS,YAEX5B,KAAM,CACJ,MAAO,aACP,QAAS,cAEX6B,MAAO,wCACPC,IAAK,qCAEPnD,SAAU,I,UAGNqC,EAAGvB,WACPjB,EAAM,UACN0C,KAAKC,UAAUM,GACf,c,iCAEKjD,G,yCAEPe,QAAQC,IAAI,yCACZD,QAAQC,IAAR,MACAD,QAAQC,IAAI,KAAM4B,QAClB7B,QAAQC,IAAI,KAAM5B,S,kBACX,I,iCAGF,I,0HC3DUmE,EACjB,WAAYC,EAAQhC,EAAKiC,EAAOC,GAAM,oBAClC1E,KAAK2E,YAAc,CACf,QAAUH,EACV,KAAOhC,EACP,OAASiC,EACT,YAAeC,ICJNE,E,8IACAC,EAAOxB,G,4EACpBlC,EAAW,IACX0D,E,gCACuB7E,KAAK8E,iBAAiBD,EAAOxB,G,QAAlD0B,E,QAEa5D,WACfA,EAAWnB,KAAKgF,kBAAkBH,EAAOE,EAAa5D,W,gCAGnDA,G,yLAGc0D,EAAOxB,G,wFACtB/B,EAAOgC,EAAQ,IACfC,EAAKD,EAAQ,IACbE,EAAK,IAAID,EAAGjC,G,SAEEA,EAAKmC,iB,cAArBf,E,cAE8BC,IAAlBD,EAAQE,OAAyC,OAAlBF,EAAQE,OACrDS,I,mBAGUG,EAAGyB,WAAWJ,G,+DAGArB,EAAG0B,SAASL,G,eAA5BM,E,OACAC,EAAO1B,KAAK2B,MAAMF,G,kBACfC,G,mCAEPrD,QAAQC,IAAI,8B,iEAIhBD,QAAQC,IAAR,MACAD,QAAQC,IAAI,+B,kBACL,I,mKAIOd,EAAaC,GAE7B,IADA,IAAImE,EAAgB,GACXC,EAAI,EAAGA,EAAIpE,EAAS6C,OAAQuB,IAAK,CACxC,IAAIC,EAAa,IAAIjB,EACnBrD,EACAC,EAASoE,GAAGZ,YAAYnC,KACxBrB,EAASoE,GAAGZ,YAAYR,OACxBhD,EAASoE,GAAGnB,aAEdkB,EAAcG,KAAKD,GAGrB,OAAOF,M,KCnDJ,SAAeI,EAAtB,oC,4CAAO,WAAkC5B,EAAWT,GAA7C,iBAAA3B,EAAA,6DACKiE,EAAqB,IAAI9B,EAD9B,SAEqB8B,EAAmBD,mBAAmB5B,EAAWT,GAFtE,cAEKmB,EAFL,yBAGQA,GAHR,4C,kEAOA,WAAmCtD,EAAamC,GAAhD,iBAAA3B,EAAA,6DACKkE,EAAS,IAAIhB,EADlB,SAEsBgB,EAAOC,aAAa3E,EAAamC,GAFvD,cAEKlC,EAFL,yBAGQA,GAHR,4C,sBASA,SAAe2E,EAAtB,sC,4CAAO,WAAkCC,EAAa7B,EAASb,GAAxD,2BAAA3B,EAAA,6DACKkE,EAAS,IAAIhB,EADlB,SAE0BgB,EAAOd,iBAAiBiB,EAAa1C,GAF/D,UAEK0B,EAFL,OAGKiB,EAAQ,IAAIC,KACZvB,EAAOsB,EAAME,cAAgB,KAAOF,EAAMG,WAAa,GAAK,IAAMH,EAAMI,UACxEC,EAAOL,EAAMM,WAAa,IAAMN,EAAMO,aAAe,IAAMP,EAAMQ,aACjEC,EAAW/B,EAAO,KAAO2B,EAC7BnC,EAAQE,YAAcqC,EACtB1E,QAAQC,IAAIkC,EAAQE,kBAEUzB,IAA1BoC,EAAa5D,SAVlB,wBAWS4D,EAAa5D,SAASsE,KAAKvB,GACvBwC,EAAc,IAAItD,EAZ/B,UAa4BsD,EAAYC,WAAWZ,EAAahB,EAAc1B,GAb9E,eAeiBtB,QAAQC,IAAI,sCAGZD,QAAQC,IAAI,6BAlB7B,6C,sBChBQ,eACK6C,GAChB+B,EAAiB/B,GAAO3C,MAAK,SAAC2E,GAE1BC,EAAiBjC,EAAM3E,KAAK2G,O,SAYrBD,E,8EAAf,WAAgC/B,GAAhC,mBAAAnD,EAAA,6DACMmF,EAwBF,grBAzBJ,SAE0B1F,EAA4B0D,EAAM3E,MAF5D,0BAEMgB,EAFN,KAEkE,UAChE2F,GAAO,aAAehC,EAAM3E,KAAO,KACnC2G,GAAO,oBAAsBhC,EAAMhE,YAAa,KAChDgG,GAAO,eACHE,EAAM,GACVlC,EAAMjE,eAAeoG,KAAI,SAACtF,GACpBqF,EAAIE,SAASvF,GACfK,QAAQC,IAAIN,EAAI,gCAEhBqF,EAAItB,KAAK/D,GACTmF,GAAO,iBAAmBnF,EAAEjB,IAAM,IAClCoG,GAAO,iBAAmBnF,EAAEhB,IAC5BmG,GAAO,SAGXA,EAAMA,EAAI9C,UAAU,EAAG8C,EAAI7C,OAAS,GACpC6C,GAAO,mBAAoB3F,EAAY,KAEvCa,QAAQC,IAAI6E,GApBd,kBAqBSA,GArBT,6C,sBChBe,kB,mCAEXK,IAFW,aAqEbrC,EAAMsC,aAAc,EACpBtC,EAAMuC,eAAe,aACrBrF,QAAQC,IAAI6C,EAAMwC,qBAClBC,aAAaC,QACX,eACA7D,KAAKC,UAAUkB,EAAMwC,uBA1EV,WAWInH,EAAMW,GACrBgE,EAAMuC,eAAelH,EAAMW,GAC3BgE,EAAM2C,YAbK,aAgBX,OAAO3C,EAAMsC,aAkDXtC,EAAQ,I,WA7CZ,aAAe,oBACb7E,KAAKY,eAAiB,GACtBZ,KAAKyH,UAAY,GACjBzH,KAAK0H,iBAAmB,GACxB1H,KAAKmH,aAAc,E,sDAGXQ,GACH3H,KAAK4H,wBAAwBD,KAChC3H,KAAKY,eAAe6E,KAAKkC,GACzB5F,QAAQC,IAAI2F,M,8CAGQA,GACtB,IAAIZ,GAAM,EAOV,OANA/G,KAAKY,eAAeoG,KAAI,SAACtF,GAIvB,OAHIA,EAAEjB,MAAQkH,EAAOlH,KAAOiB,EAAEhB,MAAQiH,EAAOjH,MAC3CqG,GAAM,GAED,KAEFA,I,qCAEM7G,EAAMW,GACnBb,KAAKyH,UAAYvH,EACjBF,KAAK0H,iBAAmB7G,I,0CAKxB,OAFQ,IAAIF,EAAWX,KAAKyH,UAAWzH,KAAKY,eAAgBZ,KAAK0H,oB,iCAKjE,IAAIG,EAAI,IAAIlH,EAAWX,KAAKyH,UAAWzH,KAAKY,eAAgBZ,KAAK0H,kBACjE3F,QAAQC,IAAI6F,GACZC,EAAsCD,K,mCAItC7H,KAAKY,eAAiB,GACtBZ,KAAKyH,UAAY,GACjBzH,KAAK0H,iBAAmB,O,kDAe5B,sBAAAhG,EAAA,yDAEUmD,EAAMsC,YAFhB,uBAGSY,UAAUC,YAAYC,oBACzB,SAACC,GACCC,EAAUD,EAASP,OAAOpH,SAAU2H,EAASP,OAAOnH,aAEtD4B,GACAgG,IARN,SAWUC,EAAM,KAXhB,kE,sBAkBA,SAASF,EAAU1H,EAAK6H,GACtB,IAAI/H,EAAWE,EACXD,EAAY8H,EAChBzD,EAAM0D,UAAU,IAAIjI,EAAcC,EAAUC,IAG9C,SAAS6H,EAAMG,GACb,OAAO,IAAIC,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAASF,MAGtD,SAASpG,GAAMwG,GACb7G,QAAQ8G,KAAR,gBAAsBD,EAAIE,KAA1B,cAAoCF,EAAIxI,UAG1C,IAAMgI,GAAU,CACdW,oBAAoB,EACpBC,QAAS,IACTC,WAAY,G,SC5DCC,I,QA9CQ,SAACjJ,GAExB,IAAIkJ,EAAUC,cAFoB,EAGDC,oBAAS,GAHR,mBAG3BC,EAH2B,KAGjBC,EAHiB,KA0B9B,OACI,kBAAC,IAAD,CAAMxJ,UAAU,aAChByJ,MAAO,QACPC,KAAM,uBAAG1J,UAAW,sBAExB,kBAAC,IAAD,CAAQA,UAAU,eAAeyC,KAAK,aAAY,uBAAGzC,UAAU,yBAE/D,kBAAC,IAAD,CAAQA,UAAU,eAAgByC,KAAK,aAAcrC,QAASF,EAAMyJ,YAAY,uBAAG3J,UAAU,wBAEzFuJ,EAAY,kBAAC,IAAD,CAAQvJ,UAAU,eAAeyC,KAAK,OAAOrC,QAAS,kBArBpEwJ,KAAMC,KAAK,0BAA2B,CACpCC,WAAW,EACX3B,SAAUyB,KAAMG,SAASC,aAG7BR,GAAa,GACbS,SAEAb,EAAQ1D,KAAK,gBAakF,uBAAG1F,UAAU,oBACvG,kBAAC,IAAD,CAAQA,UAAU,eAAeyC,KAAK,SAASrC,QAAS,kBA/B7DwJ,KAAMC,KAAK,0BAA2B,CAClCC,WAAW,EACX3B,SAAUyB,KAAMG,SAASC,aAG7BR,GAAa,QACbS,MAyBqF,uBAAGjK,UAAU,qB,UC9CvF,I,QAAA,CACXkK,MAAM,EAENC,YAHW,WAITlK,KAAKiK,MAAQjK,KAAKiK,Q,QCAxB,SAASE,KAEPC,GAAYF,cACTE,GAAYH,KACbI,SAASC,gBAAgBC,aAAa,aAAc,QAEpDF,SAASC,gBAAgBC,aAAa,aAAc,I,IAsBzCC,G,uKAhBX,OACE,yBAAKC,GAAG,YAAY1K,UAAU,aAC5B,0BAAMA,UAAU,UAAhB,aACA,2BAAOA,UAAU,UACf,2BAAOA,UAAU,eACfiD,KAAK,WACL0H,eAAgBN,GAAYH,KAC5B9J,QAASgK,KAEX,0BAAMpK,UAAU,uB,GAZAM,aCyDXsK,G,2KA7DAnB,GACXA,EAAMoB,mB,+BAIN,OACE,kBAAC,SAAD,CACEC,kBAAgB,EAChB9K,UAAU,UACV+K,WAAY9K,KAAKC,MAAM6K,WACvBC,iBAAkB/K,KAAKC,MAAM+K,WAE7B,yBAAKjL,UAAU,gBACb,wBAAIA,UAAU,UAAUkL,SAAS,KAC/B,yBAAKlL,UAAU,iBAAiBmL,IAAI,cACpC,yCAEF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMT,GAAG,OAAO1K,UAAU,YAAYoL,GAAG,KACvC,uBAAGpL,UAAU,wBACb,uCAGF,kBAAC,IAAD,CAAM0K,GAAG,YAAY1K,UAAU,YAAYoL,GAAG,kBAC5C,uBAAGpL,UAAU,yBACb,gDAGF,kBAAC,IAAD,CAAM0K,GAAG,cAAc1K,UAAU,YAAYoL,GAAG,WAC9C,uBAAGpL,UAAU,6BACb,8CAGF,kBAAC,IAAD,CAAM0K,GAAG,eAAe1K,UAAU,YAAYoL,GAAG,iBAC/C,uBAAGpL,UAAU,yBACb,+CAGF,kBAAC,IAAD,CAAM0K,GAAG,iBAAiB1K,UAAU,YAAYoL,GAAG,WACjD,uBAAGpL,UAAU,0BACb,gDAGF,kBAAC,IAAD,CAAM0K,GAAG,MAAM1K,UAAU,YAAYoL,GAAG,QACtC,uBAAGpL,UAAU,0BACb,6CAGF,kBAAC,IAAD,CAAM0K,GAAG,QAAQ1K,UAAU,YAAYoL,GAAG,UACxC,uBAAGpL,UAAU,gCACb,wCAGF,kBAAC,GAAD,a,GAtDaM,a,oBCRV+K,GAEb,SAAkBnB,GAEhB,OAAIA,EA2SG,CACT,CACE,YAAe,cACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,mBACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,UAAa,MAInB,CACE,YAAe,qBACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,OAAU,KAIhB,CACE,YAAe,6BACf,YAAe,SACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,8BACf,YAAe,SACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,0BACf,YAAe,kBACf,QAAW,CACT,CACE,MAAS,aAIf,CACE,YAAe,YACf,YAAe,WACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,UAAa,MAInB,CACE,YAAe,MACf,YAAe,WACf,QAAW,CACT,CACE,YAAe,IAEjB,CACE,WAAc,MAIpB,CACE,YAAe,MACf,YAAe,cACf,QAAW,CACT,CACE,YAAe,MAIrB,CACE,YAAe,MACf,YAAe,mBACf,QAAW,CACT,CACE,MAAS,aAIf,CACE,YAAe,iBACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,eACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,iBACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,cACf,YAAe,WACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,WACf,YAAe,mBACf,QAAW,CACT,CACE,MAAS,aAIf,CACE,YAAe,uBACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,aACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,OACf,YAAe,WACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,WAAc,gBAIpB,CACE,YAAe,OACf,YAAe,cACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,OACf,YAAe,mBACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,WAAc,MAIpB,CACE,YAAe,OACf,YAAe,qBACf,QAAW,CACT,CACE,WAAc,MAIpB,CACE,YAAe,gBACf,YAAe,WACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,UAAa,MAInB,CACE,YAAe,gBACf,YAAe,cACf,QAAW,CACT,CACE,YAAe,MAIrB,CACE,YAAe,eACf,YAAe,WACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,UAAa,MAInB,CACE,YAAe,aACf,QAAW,CACT,CACE,WAAc,gBAIpB,CACE,YAAe,aACf,YAAe,WACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,UAAa,MAInB,CACE,YAAe,aACf,YAAe,SACf,QAAW,CACT,CACE,WAAc,MAEhB,CACE,OAAU,KAIhB,CACE,YAAe,UACf,YAAe,WACf,QAAW,CACT,CACE,WAAc,MAIpB,CACE,YAAe,UACf,YAAe,cACf,QAAW,CACT,CACE,YAAe,MAIrB,CACE,YAAe,eACf,QAAW,CACT,CACE,WAAc,IAEhB,CACE,OAAU,MAIhB,CACE,YAAe,0BACf,YAAe,WACf,QAAW,CACT,CACE,WAAc,MAIpB,CACE,YAAe,0BACf,YAAe,SACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,sBACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,QACf,YAAe,WACf,QAAW,CACT,CACE,YAAe,IAEjB,CACE,WAAc,MAIpB,CACE,YAAe,QACf,YAAe,mBACf,QAAW,CACT,CACE,MAAS,cA3nBJ,CACZ,CACC,YAAe,WACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,cACf,QAAW,CACT,CACD,WAAc,QAId,CACD,YAAe,mBACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,qBACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,6BACf,YAAe,SACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,6BACf,YAAe,mBACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,0BACf,QAAW,CACT,CACD,MAAS,WAER,CACD,WAAc,gBAId,CACD,YAAe,8BACf,YAAe,cACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,MACf,YAAe,WACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,MACf,YAAe,cACf,QAAW,CACT,CACD,YAAe,MAIf,CACD,YAAe,MACf,YAAe,mBACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,iBACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,eACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,WACf,YAAe,WACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,WACf,YAAe,mBACf,QAAW,CACT,CACD,MAAS,aAIT,CACD,YAAe,uBACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,aACf,QAAW,CACT,CACD,WAAc,SAId,CACD,YAAe,OACf,YAAe,WACf,QAAW,CACT,C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","file":"static/js/main.795bfb10.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport '../../assets/css/GenericButton.css';\n\n\nclass GenericButton extends Component {\n\n render(){\n  return (\n      <button className={this.props.className} name={this.props.name} onClick={this.props.onClick}>\n       {this.props.message}\n        \n      </button>\n  );\n }\n}\n\nexport default GenericButton;\n","export default class GeoCoordinate{\n    constructor(latitude, longitude) {\n        this.lat = latitude;\n        this.lng = longitude;\n    }\n}","export default class BasicRoute {\n  constructor(name, geoCoordinates, description) {\n    this.name = name;\n    this.description = description;\n    this.geoCoordinates = Array.from(geoCoordinates);\n    this.url = \"\";\n    this.jsonFormat = \"\";\n    this.commentsUrl=\"\";\n    this.comments = [];\n  }\n\n  setUrl(url) {\n    this.url = url;\n  }\n\n  setJsonFormat(jsonFormat) {\n    this.jsonFormat = jsonFormat;\n  }\n\n  getJson() {\n    return this.jsonFormat;\n  }\n}\n","import * as auth from \"solid-auth-client\";\nimport SolidFileClient from \"solid-file-client\";\nimport { AccessControlList } from '@inrupt/solid-react-components';\nimport { type } from \"rdf-namespaces/dist/dc\";\n\nconst fileClient = new SolidFileClient(auth, { enableLogging: true });\n\n\nexport async function createContentAcl(url, nameResource) {\n  \n  let withoutSpaces = nameResource.trim();\n  let resource = withoutSpaces+ \"\";  \n\n  let aclString = `\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix ${resource}: <./>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo ${resource}:;\n      n0:agent c:me;\n      n0:default ${resource}:;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  `\n  console.log(aclString)\n  try {\n    await fileClient.createFile(url + '.acl', aclString, \"text/turtle\").then().catch((error) => {console.log('It looks like we can not create necessary folders inside your pod'+url + nameResource); return;});\n    console.log('CREATED ACL '+url);\n  } catch (e) {\n    //alert(e)\n    console.log('THE ACL COULD NOT BE ADDED ');\n  }\n}\n\nexport async function createContentAclInbox(url) {\n  let aclString = `\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix inbox: <./>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :Append\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agentClass n1:Agent;\n      n0:default inbox:;\n      n0:mode n0:Append.\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo inbox:;\n      n0:agent c:me;\n      n0:default inbox:;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  `\n\n  console.log(aclString)\n  try {\n    await fileClient.createFile(url + '.acl', aclString, \"text/turtle\").then().catch((error) => {console.log('It looks like we can not create necessary folders inside your pod'); return;});\n    console.log('CREATED ACL INBOX');\n  } catch (e) {\n    alert(e)\n  }\n}\n\n\nexport async function createContentAclMedia(url, nameResource) {\n\n  let withoutSpaces = nameResource.trim();\n  let resource = withoutSpaces+ \"\"; \n\n  let aclString = `\n  @prefix : <#>.\n  @prefix n0: <http://www.w3.org/ns/auth/acl#>.\n  @prefix n1: <http://xmlns.com/foaf/0.1/>.\n  @prefix c: </profile/card#>.\n\n  :ControlReadWrite\n      a n0:Authorization;\n      n0:accessTo <${resource}>;\n      n0:agent c:me;\n      n0:mode n0:Control, n0:Read, n0:Write.\n  `\n  console.log(aclString)\n  try {\n    await fileClient.createFile(url + '.acl', aclString, \"text/turtle\").then().catch((error) => {console.log('It looks like we can not create necessary folders inside your pod'+url + nameResource); return;});\n    console.log('CREATED ACL '+url);\n  } catch (e) {\n    //alert(e)\n    console.log('THE ACL COULD NOT BE ADDED ');\n  }\n}\n\n\n","import * as auth from \"solid-auth-client\";\nimport SolidFileClient from \"solid-file-client\";\nimport {createContentAclMedia} from \"../../data-access/FileManager/AclCreator\";\nconst fileClient = new SolidFileClient(auth, { enableLogging: true });\n\nexport default {\n  main(name, text) {\n    uploadRoute(name, text);\n  },\n};\nasync function uploadRoute(name, text) {\n  let session = await auth.currentSession();\n  if (!session || session.webId === undefined || session.webId === null) {\n    throw new Error(\"You are not logged in.\");\n  }\n\n  var file = new File([text], name + \".jsonld\", {\n    type: \"application/ld+json\",\n  });\n\n  let path = session.webId.split(\"profile\")[0];\n\n  let buildPath = `${path}viade/routes/${file.name}`;\n\n  await fileClient.createFile(buildPath, file, file.type);\n  \n  // CREATING THE ACL FOR THE ROUTE\n  createContentAclMedia(buildPath, file.name);\n}\n\n","export default class AddComment{\n\n    async addComment(url,comments,callback){\n        // createFile( fileURL, content, 'application/json', options )\n        const auth = require('solid-auth-client')\n        const FC = require('solid-file-client')\n        const fc = new FC(auth)\n\n        let session = await auth.currentSession();\n\n        if (!session || session.webId === undefined || session.webId === null){\n            callback();\n            return false;}\n\n        try {\n\n            await fc.createFile(url, JSON.stringify(comments), 'text/plain');\n            return true;\n\n\n        } catch (error) {\n            console.log(\"Comments file for the route couldn't be created\");\n            console.log(error)         // A full error response\n            console.log(error.status)  // Just the status code of the error\n            console.log(error.message) // Just the status code and statusText\n            return false;\n        }\n\n    }\n}","export default class CreateCommentsFile {\n  async createCommentsFile(routeName, callback) {\n    // createFile( fileURL, content, 'application/json', options )\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n\n    let session = await auth.currentSession();\n\n    if (!session || session.webId === undefined || session.webId === null) {\n      callback();\n    }\n\n    try {\n      let url =\n        session.webId.substring(0, session.webId.length - 16) +\n        \"/viade/comments/\" +\n        routeName +\n        \"Comments\";\n      let emptyCommentFile = {\n        \"@context\": {\n          \"@version\": 1.1,\n          comments: {\n            \"@container\": \"@list\",\n            \"@id\": \"viade:comments\",\n          },\n          comment: {\n            \"@id\": \"viade:comment\",\n            \"@type\": \"@id\",\n          },\n          author: { \"@id\": \"schema:author\", \"@type\": \"@id\" },\n          dateCreated: {\n            \"@id\": \"viade:dateCreated\",\n            \"@type\": \"xsd:date\",\n          },\n          text: {\n            \"@id\": \"viade:text\",\n            \"@type\": \"xsd:string\",\n          },\n          viade: \"http://arquisoft.github.io/viadeSpec/\",\n          xsd: \"http://www.w3.org/2001/XMLSchema#\",\n        },\n        comments: [],\n      };\n\n      await fc.createFile(\n        url + \".jsonld\",\n        JSON.stringify(emptyCommentFile),\n        \"text/plain\"\n      );\n      return url;\n    } catch (error) {\n      console.log(\"The comments file couldn't be created\");\n      console.log(error); // A full error response\n      console.log(error.status); // Just the status code of the error\n      console.log(error.message); // Just the status code and statusText\n      return \"\";\n    }\n\n    return \"\";\n  }\n}\n","export default class Comment{\n    constructor(fileUrl,text,sender,date){\n        this.jsonComment = {\n            \"fileUrl\":fileUrl,\n            \"text\":text,\n            \"author\":sender,\n            \"dateCreated\": date\n        }\n    }\n}","import Comment from \"../Entities/Comment\";\n\nexport default class LoadRouteComments {\n  async loadComments(route, callback) {\n    let comments = [];\n    if (route) {\n      let commentsJson = await this.loadCommentsJson(route, callback);\n\n      if (commentsJson.comments) {\n        comments = this.parseJsonToEntity(route, commentsJson.comments);\n      }\n    }\n    return comments;\n  }\n\n  async loadCommentsJson(route, callback) {\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n\n    let session = await auth.currentSession();\n\n    if (!session || session.webId === undefined || session.webId === null) {\n      callback();\n    }\n    try {\n      if (await fc.itemExists(route)) {\n        //console.log(routesFolder + \" exists\");\n        try {\n          let content = await fc.readFile(route);\n          let json = JSON.parse(content);\n          return json;\n        } catch (error1) {\n          console.log(\"Comment couldn't be parsed\");\n        }\n      }\n    } catch (error) {\n      console.log(error);\n      console.log(\"Comments couldn't be loaded\");\n      return \"\";\n    }\n  }\n\n  parseJsonToEntity(commentsUrl, comments) {\n    let commentsArray = [];\n    for (let i = 0; i < comments.length; i++) {\n      let newComment = new Comment(\n        commentsUrl,\n        comments[i].jsonComment.text,\n        comments[i].jsonComment.author,\n        comments[i].dateCreated\n      );\n      commentsArray.push(newComment);\n    }\n\n    return commentsArray;\n  }\n}\n","import AddComment from \"../../CommentsManager/AddComment\"\nimport CreateCommentsFile from \"../../CommentsManager/CreateCommentsFile\"\nimport LoadRouteComments from \"../../CommentsManager/GetComments\"\n\nexport async function createCommentsFile(routeName, callback) {\n        let commentFileCreator = new CreateCommentsFile();\n        let fileUrl = await commentFileCreator.createCommentsFile(routeName, callback);\n        return fileUrl;\n\n\n}\nexport async function getCommentsForRoute(commentsUrl, callback) {\n        let loader = new LoadRouteComments();\n        let comments = await loader.loadComments(commentsUrl, callback);\n        return comments;\n\n}\n\n\n\nexport async function postCommentInRoute(routeComUrl, comment, callback) {\n        let loader = new LoadRouteComments();\n        let commentsJson = await loader.loadCommentsJson(routeComUrl, callback);\n        var today = new Date();\n        var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n        var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n        var dateTime = date + ', ' + time;\n        comment.dateCreated = dateTime;\n        console.log(comment.dateCreated);\n\n        if (commentsJson.comments !== undefined) {\n                commentsJson.comments.push(comment);\n                let postComment = new AddComment();\n                let posted = await postComment.addComment(routeComUrl, commentsJson, callback);\n                if (posted) {\n                        console.log(\"New comment was posted succesfully\")\n\n                } else {\n                        console.log(\"The comment wasn't posted\");\n                }\n        }\n\n}\n","import RouteUpload from \"../data-access/FileManager/RouteUpload\";\n\nimport * as comments from \"../data-access/gateways/CommentsGateway\";\n\nexport default {\n  createNormalBasic(route) {\n    getRouteInString(route).then((str)=>{\n\n        RouteUpload.main(route.name,str);\n    });\n    //RouteUpload.main(route.name, str);\n  },\n  getNormalBasicJSON(route) {\n    getRouteInString(route).then( (strRoute)=> {\n        localStorage.setItem(\"routePreview\",route);\n    });\n   // localStorage.setItem(\"routePreview\", route);\n  },\n};\n\nasync function getRouteInString(route) {\n  let str = getContext();\n  let commentsUrl = await comments.createCommentsFile(route.name)+\".jsonld\";\n  str += '\"name\" : \"' + route.name + '\",';\n  str += '\"description\" : \"' + route.description +'\",'; \n  str += '\"points\" : [';\n  let aux = [];\n  route.geoCoordinates.map((a) => {\n    if (aux.includes(a)) {\n      console.log(a + \"Already exists in the route\");\n    } else {\n      aux.push(a);\n      str += '{\"latitude\" : ' + a.lat + \",\";\n      str += '\"longitude\" : ' + a.lng;\n      str += \"},\";\n    }\n  });\n  str = str.substring(0, str.length - 1);\n  str += '], \"comments\": \"'+ commentsUrl+'\"}';\n  //str += \"]}\";\n  console.log(str);\n  return str;\n}\nfunction getContext() {\n  return (\n    '{\"@context\": {\"@version\": 1.1,' +\n    '\"comments\": { \"@container\": \"@list\", \"@id\": \"viade:comments\" },' +\n    '\"description\": { \"@id\": \"schema:description\", \"@type\": \"xs:string\"},' +\n    '\"media\": { \"@container\": \"@list\", \"@id\": \"viade:media\" },' +\n    '\"name\": { \"@id\": \"schema:name\", \"@type\": \"xs:string\" },' +\n    '\"points\": { \"@container\": \"@list\", \"@id\": \"viade:points\" },' +\n    '\"latitude\": { \"@id\": \"schema:latitude\", \"@type\": \"xs:double\" },' +\n    '\"longitude\": { \"@id\": \"schema:longitude\", \"@type\": \"xs:double\" },' +\n    '\"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",' +\n    '\"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",' +\n    '\"schema\": \"http://schema.org/\",' +\n    '\"viade\": \"http://arquisoft.github.io/viadeSpec/\",' +\n    '\"xsd\": \"http://www.w3.org/2001/XMLSchema#\"' +\n    \"},\"\n  );\n}\n","import GeoCoordinate from \"../Entities/GeoCoordinate\";\nimport BasicRoute from \"../Entities/BasicRoute\";\nimport * as CreateRoute from \"./CreateRoute\";\n\nexport default {\n  main() {\n    main();\n  },\n\n  getRoute() {\n    route.getRoute();\n  },\n  stop() {\n    stop();\n  },\n  setNameAndUpload(name, description) {\n    route.putNameToRoute(name, description);\n    route.getRoute();\n  },\n  getRouteIsOver() {\n    return route.routeIsOver;\n  },\n};\n\nclass RouteCreator {\n  constructor() {\n    this.geoCoordinates = [];\n    this.nameRoute = \"\";\n    this.descriptionRoute = \"\";\n    this.routeIsOver = false;\n  }\n\n  addCoords(coords) {\n    if (!this.checkCoordsAlreadyExist(coords)) {\n      this.geoCoordinates.push(coords);\n      console.log(coords);\n    }\n  }\n  checkCoordsAlreadyExist(coords) {\n    let aux = false;\n    this.geoCoordinates.map((a) => {\n      if (a.lat === coords.lat && a.lng === coords.lng) {\n        aux = true;\n      }\n      return 0;\n    });\n    return aux;\n  }\n  putNameToRoute(name, description) {\n    this.nameRoute = name;\n    this.descriptionRoute = description;\n  }\n  getRouteNotUpload() {\n    let r = new BasicRoute(this.nameRoute, this.geoCoordinates, this.descriptionRoute);\n\n    return r;\n  }\n  getRoute() {\n    let r = new BasicRoute(this.nameRoute, this.geoCoordinates, this.descriptionRoute);\n    console.log(r);\n    CreateRoute.default.createNormalBasic(r);\n  }\n\n  resetRoute() {\n    this.geoCoordinates = [];\n    this.nameRoute = \"\";\n    this.descriptionRoute = \"\";\n  }\n}\n\nconst route = new RouteCreator();\n\nfunction stop() {\n  route.routeIsOver = true;\n  route.putNameToRoute(\"finalTest\");\n  console.log(route.getRouteNotUpload());\n  localStorage.setItem(\n    \"routePreview\",\n    JSON.stringify(route.getRouteNotUpload())\n  );\n}\nasync function main() {\n  let id;\n  while (!route.routeIsOver) {\n    id = navigator.geolocation.getCurrentPosition(\n      (position) => {\n        putCoords(position.coords.latitude, position.coords.longitude);\n      },\n      error,\n      options\n    );\n    \n    await sleep(2000);\n  }\n  //navigator.geolocation.clearWatch(id);\n  \n  //route.getRoute();\n}\n\nfunction putCoords(lat, long) {\n  let latitude = lat;\n  let longitude = long;\n  route.addCoords(new GeoCoordinate(latitude, longitude));\n}\n\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nfunction error(err) {\n  console.warn(`ERROR(${err.code}): ${err.message}`);\n}\n\nconst options = {\n  enableHighAccuracy: false,\n  timeout: 50000000,\n  maximumAge: 0,\n};\n","import React, {Component, useState} from 'react';\nimport {useHistory, Redirect} from \"react-router-dom\";\nimport { Fab, Action } from 'react-tiny-fab';\nimport 'react-tiny-fab/dist/styles.css';\nimport * as RealTimeRoute from \"../../RouteManager/CreateRouteRealTime\";\n\nimport { ToastContainer, toast, Bounce } from \"react-toastify\";\n\nimport 'assets/css/FloatingMenu.css'\n\nconst FloatingButton = (props) => {\n\nlet history = useHistory();\nconst [recording,setRecording] = useState(false); \nconst startRecording = ()=>{\n    toast.info(\"Route recording started\", {\n        draggable: true,\n        position: toast.POSITION.TOP_CENTER\n      });\n    \n    setRecording(true);\n    RealTimeRoute.default.main()\n}\n const  finishRecording = ()=>{\n      toast.info(\"Route recording stopped\", { \n        draggable: true,\n        position: toast.POSITION.TOP_CENTER\n      });\n    \n    setRecording(false);\n    RealTimeRoute.default.stop();\n    //props.showSaveRoute();\n    history.push('/saveroute')\n}\n\n   \n    return (\n        <Fab  className=\"mainButton\"\n        event={'click'}\n        icon={<i className =\"fa fa-plus fafab\"></i>}\n        >\n    <Action className=\"actionButton\" text=\"Add route\"><i className=\"fa fa-map-pin fafab\"></i></Action>\n\n    <Action className=\"actionButton\"  text=\"Take Photo\"  onClick={props.showUpload}><i className=\"fa fa-camera fafab\"></i></Action>\n    {\n        recording ? <Action className=\"actionButton\" text=\"Stop\" onClick={() => finishRecording()}><i className=\"fa fas fa-stop\"></i></Action>\n        :<Action className=\"actionButton\" text=\"Record\" onClick={() => startRecording()}><i className=\"fa fa-circle\"></i></Action>\n    }\n    \n    \n    \n\n</Fab>\n    );\n\n}\nexport default FloatingButton;\n","export default {\n    dark: false,\n    \n    switchTheme() {\n      this.dark = !this.dark;\n    },\n  }\n","import React, {Component} from 'react';\nimport ConfigCache from 'caches/ConfigCache.js'\nimport 'assets/css/ThemeSwitch.css'\n\nfunction toggleTheme()\n{\n  ConfigCache.switchTheme()\n  if(ConfigCache.dark)\n    document.documentElement.setAttribute('data-theme', 'dark');\n  else\n    document.documentElement.setAttribute('data-theme', '');\n}\n\nclass ThemeSwitch extends Component {\n  render()\n  {\n    return (\n      <div id=\"lightmode\" className=\"menu-item\">\n        <span className=\"toggle\">Dark mode</span>\n        <label className=\"switch\">\n          <input className=\"theme-switch\"\n            type=\"checkbox\"\n            defaultChecked={ConfigCache.dark}\n            onClick={toggleTheme}\n          />\n          <span className=\"slider round\"></span>\n        </label>\n      </div>\n    );\n  }\n}\n\nexport default ThemeSwitch;\n","import React, { Component } from \"react\";\nimport { slide as Menu } from \"react-burger-menu\";\n\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport \"assets/css/BurgerMenu.css\";\n\nimport ThemeSwitch from \"./ThemeSwitch.js\";\n\nclass BurgerMenu extends Component {\n  showSettings(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      <Menu\n        disableAutoFocus\n        className=\"bm-menu\"\n        pageWrapId={this.props.pageWrapId}\n        outerContainerId={this.props.container}\n      >\n        <nav className=\"bm-item-list\">\n          <h2 className=\"bm-item\" tabIndex=\"0\">\n            <img className=\"fa fa-fw fa-2x\" src=\"ViaDe.png\"></img>\n            <span> ViaDe</span>\n          </h2>\n          <Router>\n            <Link id=\"home\" className=\"menu-item\" to=\"/\">\n              <i className=\"fa fa-fw fas fa-map\"></i>\n              <span>Home</span>\n            </Link>\n\n            <Link id=\"add-route\" className=\"menu-item\" to=\"/notifications\">\n              <i className=\"fa fa-fw far fa-bell\"></i>\n              <span>Notifications</span>\n            </Link>\n\n            <Link id=\"list-routes\" className=\"menu-item\" to=\"/routes\">\n              <i className=\"fa fa-fw far fa-list-alt\"></i>\n              <span>List Routes</span>\n            </Link>\n\n            <Link id=\"list-friends\" className=\"menu-item\" to=\"/friends-list\">\n              <i className=\"fa fa-fw fas fa-user\"></i>\n              <span>List Friends</span>\n            </Link>\n\n            <Link id=\"groups-friends\" className=\"menu-item\" to=\"/groups\">\n              <i className=\"fa fa-fw fas fa-users\"></i>\n              <span>Friend Groups</span>\n            </Link>\n\n            <Link id=\"gpx\" className=\"menu-item\" to=\"/gpx\">\n              <i className=\"fa fa-fw fas fa-cubes\"></i>\n              <span>Import GPX</span>\n            </Link>\n\n            <Link id=\"about\" className=\"menu-item\" to=\"/about\">\n              <i className=\"fa fa-fw fas fa-info-circle\"></i>\n              <span>About</span>\n            </Link>\n\n            <ThemeSwitch />\n          </Router>\n        </nav>\n      </Menu>\n    );\n  }\n}\n\nexport default BurgerMenu;\n","export default getStyle\n\n  function getStyle(dark)\n  {\n    if(!dark)\n      return [\n\t{\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#ebebeb\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"elementType\": \"labels.icon\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"on\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#616161\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"elementType\": \"labels.text.stroke\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#f5f5f5\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"administrative.land_parcel\",\n\t\t\"elementType\": \"labels\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"administrative.land_parcel\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#bdbdbd\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"administrative.locality\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#9e9e9e\"\n\t\t  },\n\t\t  {\n\t\t\t\"visibility\": \"simplified\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"administrative.neighborhood\",\n\t\t\"elementType\": \"labels.text\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#eeeeee\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi\",\n\t\t\"elementType\": \"labels.icon\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"saturation\": -70\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#757575\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.attraction\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.business\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.park\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#c7e2c7\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.park\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#9e9e9e\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.place_of_worship\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"poi.school\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#ffffff\"\n\t\t  },\n\t\t  {\n\t\t\t\"visibility\": \"simplified\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road\",\n\t\t\"elementType\": \"labels.icon\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road\",\n\t\t\"elementType\": \"labels.text\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"on\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.arterial\",\n\t\t\"elementType\": \"labels.icon\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"saturation\": -75\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.arterial\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#757575\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.highway\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#dadada\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.local\",\n\t\t\"elementType\": \"labels\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.local\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#9e9e9e\"\n\t\t  },\n\t\t  {\n\t\t\t\"visibility\": \"on\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"road.local\",\n\t\t\"elementType\": \"labels.text.stroke\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"transit\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"saturation\": -75\n\t\t  },\n\t\t  {\n\t\t\t\"lightness\": 20\n\t\t  },\n\t\t  {\n\t\t\t\"visibility\": \"on\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"transit.line\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#e2e2e2\"\n\t\t  },\n\t\t  {\n\t\t\t\"weight\": 0.5\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"transit.station.airport\",\n\t\t\"elementType\": \"labels\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"transit.station.bus\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"visibility\": \"off\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"water\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#bfdcf9\"\n\t\t  }\n\t\t]\n\t  },\n\t  {\n\t\t\"featureType\": \"water\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t  {\n\t\t\t\"color\": \"#9e9e9e\"\n\t\t  }\n\t\t]\n\t  }\n\t];\n\t\t\n\t\telse {\n\t\t  return [\n  {\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 60\n      }\n    ]\n  },\n  {\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"weight\": 2\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.land_parcel\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.neighborhood\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.province\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 25\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"saturation\": -75\n      },\n      {\n        \"lightness\": -75\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"saturation\": -50\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#757575\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.attraction\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.business\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.government\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.medical\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.park\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#9e9e9e\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.place_of_worship\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.school\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#999999\"\n      },\n      {\n        \"visibility\": \"simplified\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#9e9e9e\"\n      },\n      {\n        \"lightness\": -15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"lightness\": -15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"saturation\": -75\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"stylers\": [\n      {\n        \"visibility\": \"simplified\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"color\": \"#000000\"\n      },\n      {\n        \"lightness\": 15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.local\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      },\n      {\n        \"weight\": 1\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"lightness\": -70\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"saturation\": -50\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.line\",\n    \"stylers\": [\n      {\n        \"lightness\": -20\n      },\n      {\n        \"weight\": 0.5\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station.airport\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"lightness\": -15\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station.airport\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station.bus\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"saturation\": -70\n      },\n      {\n        \"lightness\": -75\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#9e9e9e\"\n      }\n    ]\n  }\n];\n    }\n  }\n","\n/*\n//\t\tIMPORTANT: When changing this file locally, execute\n\t\t\t\t\t\t\t\t\t\tgit update-index --assume-unchanged src\\ApiKey.js\n\t\t\t\t\t\t\t\t so git doesn't track the change to an unrestricted API key\n*/\n\nfunction getKey() {\n\treturn \"AIzaSyBgV1zy9YSvClMQloue9b7pdd0sSfB8W9o\";\n}\n\nexport default getKey;\n","import mime from \"mime\";\n\nexport default class File {\n  constructor(filePath, dateAttached) {\n    this.filePath = filePath;\n    this.dateAttached = new Date(dateAttached);\n\n    this.contentType = mime.getType(this.filePath);\n  }\n}\n","export default class RouteFile {\n  constructor(routePath, files) {\n    this.routePath = routePath;\n    this.files = [...files];\n  }\n\n  hasPath(path) {\n    return this.files.includes(path);\n  }\n\n  addFilePath(path) {\n    if (!this.files.includes(path)) {\n      this.files = [...this.files, path];\n    }\n  }\n\n  removeFilePath(path) {\n    this.files = this.files.filter((fp) => fp !== path);\n  }\n}\n","import File from \"../Entities/File\";\nimport BasicRoute from \"../Entities/BasicRoute\";\nimport RouteFile from \"../Entities/RouteFile\";\n\nexport default class RoutesLoader {\n  async loadUserRoutesFiles(callback) {\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n    let routes = [];\n    let urls = [];\n    let session = await auth.currentSession();\n    //let popupUri = 'https://solid.community/common/popup.html';\n    if (!session || session.webId === undefined || session.webId === null) {\n      //session = await auth.popupLogin({popupUri});\n      callback();\n      return { routes: [], files: [] };\n    }\n\n    localStorage.setItem(\"session\", JSON.stringify(session));\n\n    //alert('Logged in as ' + session.webId);\n    let routesFolder =\n      session.webId.substring(0, session.webId.length - 16) + \"/viade/routes/\"; //\"/public/Routes/\";\n\n    //checking permissions to access routeFolder\n    await fc\n      .itemExists(routesFolder)\n      .then()\n      .catch((err) => {\n        console.log(\n          \"It looks like we can not access to the path \" + routesFolder\n        );\n        return;\n      });\n\n    if (\n      await fc\n        .itemExists(routesFolder)\n        .then()\n        .catch((err) => {\n          console.log(\n            \"It looks like we can not access to the path \" + routesFolder\n          );\n          return;\n        })\n    ) {\n      try {\n        let content = await fc.readFolder(routesFolder);\n        let files = content.files;\n\n        for (let i = 0; i < files.length; i++) {\n          let fileContent = await fc.readFile(files[i].url);\n          urls.push(files[i].url);\n          routes.push(fileContent);\n        }\n      } catch (error) {\n        console.log(\"The folder couldn't be read\");\n        console.log(error); // A full error response\n        console.log(error.status); // Just the status code of the error\n        console.log(error.message); // Just the status code and statusText\n      }\n    } else {\n      console.log(\"user has no routes directory\");\n    }\n\n    let rou = this.jsonToEntity(this.routesToJson(routes, urls), urls);\n    localStorage.setItem(\"urls\", JSON.stringify(urls));\n    //localStorage.setItem('rutas', JSON.stringify(rou));\n\n    return rou;\n  }\n\n  async loadRouteByName(name, callback) {\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n\n    let session = await auth.currentSession();\n    let popupUri = \"https://solid.community/common/popup.html\";\n    if (!session || session.webId === undefined || session.webId === null) {\n      callback();\n      return undefined;\n    }\n    //alert('Logged in as ' + session.webId);\n    let routesFolder =\n      session.webId.substring(0, session.webId.length - 16) + \"/viade/routes/\";\n\n    if (await fc.itemExists(routesFolder)) {\n      //console.log(routesFolder + \" exists\");\n      try {\n        let content = await fc.readFolder(routesFolder);\n\n        let files = content.files;\n\n        for (let i = 0; i < files.length; i++) {\n          let fileContent = await fc.readFile(files[i].url);\n          try {\n            let tempRoute = JSON.parse(fileContent);\n            if (tempRoute.name === name) {\n              let route = new BasicRoute(\n                tempRoute.name,\n                tempRoute.points,\n                tempRoute.description\n              );\n              let comUrl;\n              if (tempRoute.comments != undefined) {\n                comUrl = tempRoute.commentsUrl;\n              } else {\n                comUrl = \"\";\n              }\n              route.comments = comUrl;\n              route.setUrl(files[i].url);\n              route.setJsonFormat(tempRoute);\n              console.log(\"Match \" + route.url);\n              return route;\n            }\n          } catch (error) {\n            console.log(\"wrong json format\");\n          }\n        }\n      } catch (error) {\n        console.log(\"The folder couldn't be read\");\n        console.log(error); // A full error response\n        console.log(error.status); // Just the status code of the error\n        console.log(error.message); // Just the status code and statusText\n      }\n    } else {\n      console.log(\"user has no routes directory\");\n    }\n\n    return undefined;\n  }\n\n  routesToJson(routes, urls) {\n    let jsonRoutes = [];\n    for (let i = 0; i < routes.length; i++) {\n      try {\n        let route = JSON.parse(routes[i]);\n        jsonRoutes.push(route);\n      } catch (e) {\n        urls.splice(i, 1);\n        console.log(\n          \"Route \" +\n            i +\n            \" couldn't be transformed to json because the format is wrong\"\n        );\n      }\n    }\n    return jsonRoutes;\n  }\n\n  jsonToEntity(routes, urls) {\n    let entRoutes = [];\n    let entFiles = [];\n    console.table(routes);\n    for (let i = 0; i < routes.length; i++) {\n      try {\n        console.log(routes[i]);\n        let name = routes[i].name;\n        let it = routes[i].points;\n        let desc = routes[i].description;\n        let comUrl;\n        if (routes[i].hasOwnProperty(\"comments\")) {\n          if (routes[i].comments != undefined) {\n            comUrl = routes[i].comments;\n          } else {\n            comUrl = \"\";\n          }\n        } else {\n          comUrl = \"\";\n        }\n        let route = new BasicRoute(name, it, desc);\n        route.commentsUrl = comUrl;\n        route.setUrl(urls[i]);\n        route.setJsonFormat(routes[i]);\n        entRoutes.push(route);\n        console.log(\"Route \" + route.name + \" was created succesfully\");\n\n        if (routes[i].media) {\n          entFiles.push(this.getMediaAttachedToRoute(routes[i], urls[i]));\n        }\n      } catch (e) {\n        console.log(\n          \"Route \" + i + \" couldn't be parsed because the format is wrong\"\n        );\n        console.log(e);\n      }\n    }\n    console.log(entFiles);\n    return { routes: entRoutes, files: entFiles };\n  }\n\n  getMediaAttachedToRoute(route, url) {\n    let routeFile = new RouteFile(url, []);\n\n    for (let i = 0; i < route.media.length; i++) {\n      let path = route.media[i][\"@id\"];\n      let date = new Date(route.media[i][\"dateTime\"]);\n      let file = new File(path, date);\n      routeFile.addFilePath(file);\n    }\n\n    return routeFile;\n  }\n}\n\n","\nimport RouteCache from \"../caches/routeCache/RouteCache\"\n\nexport default class DeleteUserRoute{\n    /**\n     * Deletes a route by name\n     * Returns true if the route was found and deleted\n     * Returns false if it does not exist.\n     * \n     * @param {*} routeName \n     */\n    async deleteRouteByName(routeName) {\n        const auth = require('solid-auth-client')\n        const FC = require('solid-file-client')\n        const fc = new FC(auth)\n\n        //to delete\n        routeName = routeName + \".json\";\n\n        let session = await auth.currentSession();\n        let popupUri = 'https://solid.community/common/popup.html';\n        if (!session || session.webId === undefined || session.webId === null)\n            session = await auth.popupLogin({popupUri});\n   \n        let routesFolder = session.webId.substring(0, session.webId.length - 16) + //\"/public/Routes/\";\n                            \"/viade/routes/\";\n        \n        if (await fc.itemExists(routesFolder)) {\n            try {\n\n                let content = await fc.readFolder(routesFolder);                \n                let files = content.files;\n\n                for (let i = 0; i < files.length; i++) {\n                    let urlRoute = files[i].url;\n                   \n                    \n                    //Getting the name to erase it\n                    let aux = urlRoute.split('/');\n                    let nameRoutes = aux[aux.length-1];\n                    \n                    //Check if the route retrieved has the same name than the one we're looking for\n                    if(routeName === nameRoutes){\n                        //DELETING FROM POD\n                        fc.delete(urlRoute);\n                        //DELETING FROM CACHE\n                       // this.deleteRouteFromStorage(routeName);\n                        return true;\n                    }                                                  \n                }\n                return false;\n\n            } catch (error) {\n                console.log(\"The folder couldn't be read\")\n                console.log(error)         // A full error response\n                console.log(error.status)  // Just the status code of the error\n                console.log(error.message) // Just the status code and statusText\n            }\n\n        } else {\n            console.log(\"user has no routes directory\")\n        }\n\n    }\n\n    /**\n     * Deletes a route by the URL\n     * @param {} urlProvided \n     */\n    async deleteRouteByUrl(urlProvided) {\n        const auth = require('solid-auth-client')\n        const FC = require('solid-file-client')\n        const fc = new FC(auth)\n\n        \n        let session = await auth.currentSession();\n        let popupUri = 'https://solid.community/common/popup.html';\n        if (!session || session.webId === undefined || session.webId === null)\n            session = await auth.popupLogin({popupUri});\n   \n        let routesFolder = session.webId.substring(0, session.webId.length - 16) + \"/public/Routes/\";\n\n        \n        if (await fc.itemExists(routesFolder)) {\n         \n            try {\n\n                let content = await fc.readFolder(routesFolder);                \n                let files = content.files;\n\n                for (let i = 0; i < files.length; i++) {\n                    let urlFromPod = files[i].url;\n                                       \n                    //Check if the url retrieved is the same than the one we're looking for\n                    if(urlProvided === urlFromPod){\n                        fc.delete(urlFromPod);\n                        //deleteRouteFromStorage();\n                        return true;\n                    }                                                  \n                }\n                return false;\n\n            } catch (error) {\n                console.log(\"The folder couldn't be read\")\n                console.log(error)         // A full error response\n                console.log(error.status)  // Just the status code of the error\n                console.log(error.message) // Just the status code and statusText\n            }\n\n        } else {\n            console.log(\"user has no routes directory\")\n        }\n\n    }\n\n    /**\n     * Auxiliar method that calls to the delete on the RouteChache.js\n     * @param {} routeName \n     */\n    deleteRouteFromStorage(routeName){        \n        let route = new RouteCache();//Should be changed to RouteCache.getInstance();      \n        route.deleteRouteByName(routeName);\n    }\n}\n\n\n\n\n\n","export default class updateRoute {\n  //createFile( fileURL, content, contentType, options )\n\n  async updatePod(route, callback) {\n    // createFile( fileURL, content, 'application/json', options )\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n\n    let session = await auth.currentSession();\n\n    if (!session || session.webId === undefined || session.webId === null) {\n      callback();\n      return false;\n    }\n\n    try {\n      await fc.createFile(\n        route.url,\n        JSON.stringify(route.jsonFormat),\n        \"application/json\"\n      );\n      return true;\n    } catch (error) {\n      console.log(\"The route couldn't be updated\");\n      console.log(error); // A full error response\n      console.log(error.status); // Just the status code of the error\n      console.log(error.message); // Just the status code and statusText\n      return false;\n    }\n  }\n}\n","import RoutesLoader from \"RouteManager/ListUserRoutes\";\nimport DeleteUserRoute from \"RouteManager/DeleteUserRoute\";\nimport UpdateRoute from \"RouteManager/UpdateRoute\";\n\nexport async function findByName(name, callback) {\n  let routesLoader = new RoutesLoader();\n  let route = await routesLoader.loadRouteByName(name, callback);\n  return route;\n}\n\nexport function findAll(callback) {\n  let routesLoader = new RoutesLoader();\n  let loadedRoutes = routesLoader.loadUserRoutesFiles(callback);\n  return loadedRoutes;\n}\n\nexport function read(routeFile) {}\n\nexport function add(route) {}\n\nexport function deleteByName(name) {\n  let routesDeleter = new DeleteUserRoute();\n  if (routesDeleter.deleteRouteByName(name)) {\n    return true;\n  }\n  return false;\n}\n\nexport function deleteByUrl(url) {\n  let routesDeleter = new DeleteUserRoute();\n  if (routesDeleter.deleteRouteByUrl(url)) {\n    return true;\n  }\n  return false;\n}\n\nexport async function updateByName(cacheRoute, newRouteData, callback) {\n  let foundRoute = await findByName(cacheRoute.name, callback);\n\n  if (foundRoute !== null && foundRoute !== undefined) {\n    foundRoute.name = newRouteData.name;\n    foundRoute.jsonFormat.name = newRouteData.name;\n\n    let updateRoute = new UpdateRoute();\n    let wasPodUpdated = await updateRoute.updatePod(foundRoute);\n    if (wasPodUpdated) {\n      console.log(\"Pod was updated correctly\");\n      return foundRoute;\n    } else {\n      console.log(\"Pod wasn't updated\");\n      return undefined;\n    }\n  }\n\n  return undefined;\n}\n\n","export const handleFetchError = async error => {\n  let detailedErrorMessage = \"\";\n  let displayErrorMessage = \"\";\n\n  console.group(\"handleFetchError\");\n  if (error instanceof Response) {\n    detailedErrorMessage = await error.text();\n\n    console.error(`url: ${error.url}`);\n    console.error(`status: ${error.status}`);\n\n    const displayMessages = {\n      \"401\": `The ressource at ${error.url} requires you to login.`,\n      \"403\": `You don't have permission to access the ressource at ${error.url}.\n            Please make sure that you are logged in with the correct account.\n            If the server runs with version 5.0.0 or higher, make sure you gave this app read/write permission`,\n      \"404\": `The ressource at ${error.url} was not found`,\n      \"500\": `An internal server error occured...\n            ${detailedErrorMessage}`\n    };\n    if (error.status in displayMessages)\n      displayErrorMessage = displayMessages[error.status];\n  } else if (error instanceof Error) {\n    detailedErrorMessage = error.message;\n    console.error(error.stack);\n  } else if (typeof error === \"string\") {\n    detailedErrorMessage = error;\n  } else {\n    detailedErrorMessage = JSON.stringify(error);\n  }\n  console.error(`errorMessage: ${detailedErrorMessage}`);\n  console.error(`error: ${error}`);\n  console.groupEnd();\n\n  throw new Error(\n    displayErrorMessage ? displayErrorMessage : detailedErrorMessage\n  );\n}\n","import * as auth from \"solid-auth-client\";\nimport SolidFileClient from \"solid-file-client\";\nimport mime from \"mime\";\nimport { handleFetchError } from \"./FileUtils\";\nimport { createContentAclMedia } from \"../../data-access/FileManager/AclCreator\";\n\nconst fileClient = new SolidFileClient(auth, { enableLogging: true });\n\nexport const uploadFiles = async (fileList) => {\n  let session = await auth.currentSession();\n  if (!session || session.webId === undefined || session.webId === null) {\n    throw new Error(\"You are not logged in.\");\n  }\n\n  if (!fileList.length) {\n    return Promise.reject(\"No files to upload\");\n  }\n\n  let validFiles = validContentType(fileList);\n  if (!validFiles) {\n    return Promise.reject(\"All files must be images or videos.\");\n  }\n\n  let path = session.webId.split(\"profile\")[0];\n  const promises = Array.from(fileList).map((file) => {\n    let buildPath = `${path}viade/resources/${file.name}`;\n    return updateFile(\n      buildPath,\n      file,\n      file.type || mime.getType(file.name)\n    ).then(() => {\n      return buildPath;\n    });\n  });\n  return Promise.all(promises).catch((err) => {\n    handleFetchError(err);\n  });\n};\n\nconst updateFile = (path, content, contentType) => {\n  return fileClient\n    .putFile(path, content, contentType)\n    .catch(handleFetchError);\n};\n\nconst validContentType = (fileList) => {\n  let valid = true;\n  fileList.forEach((file) => {\n    if (\n      !(fileItem.isImage(file.name.toString()) || fileItem.isVideo(file.name))\n    ) {\n      valid = false;\n    }\n  });\n  return valid;\n};\n\nconst fileItem = {\n  isImage(name) {\n    return patterns.image.test(name);\n  },\n  isVideo(name) {\n    return patterns.video.test(name);\n  },\n};\n\nconst patterns = {\n  image: /\\.(jpe?g|gif|bmp|png|svg|tiff?)$/i,\n  video: /\\.(mp4|webm|ogg|avi)$/i,\n};\n","import * as auth from \"solid-auth-client\";\nimport SolidFileClient from \"solid-file-client\";\nimport { handleFetchError } from \"./FileUtils\";\n\nconst routesFolder = \"viade/routes/\";\n\nconst getAttachmentDate = () => {\n  return new Date().toISOString();\n};\n\nexport const checkLinkableRoute = async (routeName) => {\n  let session = await auth.currentSession();\n  let storageRoot = session.webId.split(\"profile\")[0];\n  return routeName.includes(storageRoot);\n}\n\nexport const linkFilesToRoute = async (fileUris, routeName) => {\n  let fileClient = new SolidFileClient(auth, { enableLogging: true });\n  let session = await auth.currentSession();\n  let storageRoot = session.webId.split(\"profile\")[0];\n  let buildRouteFolderPath = storageRoot + routesFolder;\n  let attachementDate = getAttachmentDate();\n\n  if (await fileClient.itemExists(buildRouteFolderPath)) {\n    let viadeRoutes = await fileClient.readFolder(storageRoot + routesFolder);\n    let routeFiles = viadeRoutes.files;\n    \n    routeFiles.forEach(async (file) => {\n      if (file.url.match(routeName)) {\n        let routeFile = await fileClient.readFile(file.url);\n        let route = JSON.parse(routeFile);\n        if (!route.media) {\n          route.media = [];\n        }\n        fileUris.forEach((fileUri) => {\n          route.media.push({ \"@id\": fileUri, dateTime: attachementDate });         \n        });\n        fileClient\n          .putFile(file.url, JSON.stringify(route), file.type)\n          .catch(handleFetchError);\n      }\n    });\n  }\n};\n","import * as FileUpload from \"../FileManager/FileUpload\";\nimport * as FileLink from \"../FileManager/FileLink\";\n\nexport async function uploadFiles(routeName, fileList) {\n  if(await FileLink.checkLinkableRoute(routeName)) {\n    let filePaths = await FileUpload.uploadFiles(fileList);\n    await FileLink.linkFilesToRoute(filePaths, routeName);\n  }\n}\n\nexport async function removeFileAttached() {}\n","import RouteFile from \"Entities/RouteFile\";\nimport {\n  uploadFiles,\n  removeFileAttached,\n} from \"data-access/gateways/FileGateway\";\n\nimport routeCache from \"../routeCache/RouteCache\";\n\nexport default {\n  filePaths: [],\n  async uploadFiles(files) {\n    let route = await routeCache.getSelected();\n    try {\n      let found = this.filePaths.find((rf) => rf.routePath === route.url);\n      console.log(found);\n      if (found) {\n        uploadFiles(found.routePath, files);\n      } else {\n        let filesMap = new RouteFile(route.url, []);\n        this.filePaths = [...this.filePaths, filesMap];\n\n        uploadFiles(filesMap.routePath, files);\n      }\n    } catch (err) {\n      console.log(err.message);\n    }\n  },\n  addFilePaths(routeFiles) {\n    routeFiles.forEach(routeFile => {\n      if(!this.filePaths.find(rf => rf.routePath === routeFile.routePath)) {\n        this.filePaths.push(routeFile);\n      }\n    })\n  },\n  async removeFile(route, path) {\n    this.filePaths.forEach((rf) => {\n      if (rf.routePath === route.url && rf.hasPath(path)) {\n        rf.removeFilePath(path);\n      }\n    });\n    await removeFileAttached(route, path);\n  },\n  getFilePathsForRoute(route) {\n    console.log(route)\n    console.log(this.filePaths)\n    let routeFile = this.filePaths.find((rf) => rf.routePath === route.url);\n    console.log(routeFile)\n    return routeFile ? [...routeFile.files] : [];\n  },\n};\n","import * as RouteGateway from \"data-access/gateways/RouteGateway\";\nimport FileCache from \"../fileCache/FileCache\";\nimport * as CommentsGateway from \"../../data-access/gateways/CommentsGateway\";\n\nexport default {\n  routes: [],\n  selected: \"\",\n  selectedDetails: \"\",\n  routeToUpload: \"\",\n  reload: false,\n  selectedToShare: \"\",\n  sharedRoutes: [],\n  async getSharedRoutes() {\n    return this.sharedRoutes;\n  },\n  setSharedRoutes(route) {\n    this.sharedRoutes = route;\n  },\n  getSelectedToShare() {\n    return this.selectedToShare;\n  },\n  setSelectedToShare(route) {\n    this.selectedToShare = route;\n  },\n  getSelectedToUpload() {\n    return this.routeToUpload;\n  },\n  setSelectedToUpload(route) {\n    this.routeToUpload = route;\n  },\n  addRoute(route) {\n    if (route && !this.routes.find((obj) => route.name === obj.name)) {\n      RouteGateway.add(route);\n      this.routes.push(Object.assign({}, route));\n    }\n  },\n  deleteRoute(route) {\n    this.routes = this.routes.filter((obj) => route.name !== obj.name);\n    RouteGateway.deleteByName(route.name);\n  },\n  async updateRoute(route, newRouteData, callback) {\n    let updatedRoute = await RouteGateway.updateByName(\n      route,\n      newRouteData,\n      callback\n    );\n    if (updatedRoute !== null && updatedRoute !== undefined) {\n      this.routes = this.routes.filter((obj) => route.name !== obj.name);\n      this.routes.push(updatedRoute);\n      this.routes.sort((r1, r2) =>\n        r1.name > r2.name ? 1 : r1.name < r2.name ? -1 : 0\n      );\n    }\n  },\n  async getRoutes(callback) {\n    if (this.routes.length === 0 || this.reload) {\n      let foundRoutes = await RouteGateway.findAll(callback);\n      if (foundRoutes.routes.length > 0) {\n        this.routes = foundRoutes.routes;\n        FileCache.addFilePaths(foundRoutes.files);\n      } else {\n        this.routes = [];\n      }\n    }\n    return this.routes;\n  },\n  setSelected(route) {\n    let found = this.routes.find((obj) => route.name === obj.name);\n\n    let foundShare = this.sharedRoutes.find((obj) => route.name === obj.name);\n\n    if (found) {\n      console.log(`Route selected: ${found}`);\n      this.selected = found;\n      return;\n    }\n\n    if (foundShare) {\n      this.selected = foundShare;\n      return;\n    }\n\n    found = RouteGateway.findByName(route);\n    if (found) {\n      this.routes.push(found);\n      this.routes.sort((r1, r2) =>\n        r1.name > r2.name ? 1 : r1.name < r2.name ? -1 : 0\n      );\n    }\n    this.selected = found;\n  },\n  async getSelected() {\n    return this.selected;\n  },\n  clear() {\n    this.routes = [];\n    this.selected = \"\";\n    this.selectedDetails = \"\";\n    this.routeToUpload = \"\";\n    this.reload = false;\n    this.selectedToShare = \"\";\n    this.sharedRoutes = [];\n  },\n  setSelectedDetails(route) {\n    this.selectedDetails = route;\n  },\n  getSelectedDetails() {\n    return this.selectedDetails;\n  },\n  setReload(reload) {\n    this.reload = reload;\n  },\n};\n","import React from \"react\";\nimport ReactLoading from \"react-loading\";\nimport 'assets/css/CustomLoader.css';\nexport default class CustomLoader extends React.Component{\n    render(){\n        return (\n        <div className=\"containerLoader\">\n            <ReactLoading \n             type=\"bubbles\" \n             color=\"#fff\" \n             className=\"loader\"\n             />\n        </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { Map, Polyline, Marker, GoogleApiWrapper } from \"google-maps-react\";\nimport getStyle from \"./MapStyles.js\";\nimport getKey from \"ApiKey.js\";\nimport * as cache from \"caches/routeCache/RouteCache\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\n\nimport { toast } from \"react-toastify\";\n\nimport ConfigCache from \"caches/ConfigCache.js\";\n\nexport class MapContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      route: \"\",\n      dark: ConfigCache.dark,\n    };\n  }\n\n  center = { lat: 43.362448, lng: -5.849005 };\n  route = [];\n  //{lat: 43.361778, lng: -5.848008}, {lat: 43.363836, lng: -5.851059}, {lat: 43.363174, lng: -5.852273}\n  zoom = 15;\n\n  setZoom(zoom) {\n    this.zoom = zoom;\n  }\n\n  componentDidMount() {\n    toast.info(\"Route Selected\", {\n      draggable: true,\n      position: toast.POSITION.TOP_CENTER,\n    });\n    cache.default.getSelected().then((rutita) => {\n      this.setState({ loading: false, route: rutita, dark: ConfigCache.dark });\n    });\n  }\n\n  viewLoaded = (route, dark) => {\n    var ruta = [];\n\n    if (localStorage.getItem(\"routePreview\")) {\n      let dots = JSON.parse(localStorage.getItem(\"routePreview\"));\n\n      var puntos = dots.geoCoordinates;\n      puntos.forEach((punto) => {\n        ruta.push({\n          lat: parseFloat(punto.lat),\n          lng: parseFloat(punto.lng),\n        });\n      });\n      route = ruta;\n    } else if (route) {\n      puntos = route.geoCoordinates;\n      puntos.forEach((punto) => {\n        ruta.push({\n          lat: parseFloat(punto.latitude),\n          lng: parseFloat(punto.longitude),\n        });\n      });\n\n      route = ruta;\n    } else {\n      route = this.route;\n    }\n    localStorage.removeItem(\"routePreview\");\n    if (route.length !== 0) {\n      this.center = route[Math.floor(route.length / 2)];\n    }\n\n    return (\n      <Map\n        google={this.props.google}\n        zoom={this.zoom}\n        styles={getStyle(dark)}\n        streetViewControl={false}\n        mapTypeControl={false}\n        fullscreenControl={false}\n        zoomControl={false}\n        initialCenter={this.center}\n      >\n        <Polyline\n          path={route}\n          strokeColor=\"#717171\"\n          strokeOpacity={1}\n          strokeWeight={0.4 * this.zoom}\n        />\n        <Marker\n          title={\"Start of route\"}\n          name={\"Start of route\"}\n          position={route[0]}\n          opacity={1}\n          icon={\"https://arquisoft.github.io/viade_en2b/ViaDeSmall.png\"}\n        />\n      </Map>\n    );\n  };\n\n  render() {\n    const { loading } = this.state;\n\n    return (\n      <React.Fragment>\n        {loading ? (\n          <CustomLoader />\n        ) : (\n          this.viewLoaded(this.state.route, this.state.dark)\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: getKey(),\n  language: \"en-US\",\n})(MapContainer);\n","\nimport React, { Component } from 'react';\n\nimport 'assets/css/Multiviewer.css';\nclass MultimediaViewer extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        files: []\n    }\n  }\n  files = [];\n  componentDidUpdate(){\n    this.props.files.forEach((item)=>{\n      this.state.files.push(item);\n      this.files.push(item);\n    });\n  }\n  getIcon(element){\n      var extension = element.type;\n      if(extension.includes(\"jpg\") \n        || extension.includes(\"jpeg\")\n        || extension.includes(\"png\") )\n        return (<i className=\"fa fas fa-camera-retro\"></i>);\n      else\n        return (<i className=\"fa far fa-map\"></i>);\n  }\n  render() {\n \n    return (\n        <React.Fragment>\n          <ul className=\"listMedia\">\n              {this.props.files.map((item,index)=>{\n              return(\n                <li className=\"mediaElement\" key={index}>\n                  {this.getIcon(item)}{item.name}          \n                </li>);\n                })\n              }\n          </ul>\n          \n        </React.Fragment>\n      \n    )\n  }\n}\n\nexport default MultimediaViewer;\n\n","import React, { Component } from \"react\";\nimport \"../../assets/css/Dropzone.css\";\nimport MultimediaViewer from \"./MultimediaViewer\";\n\nimport GenericButton from \"../generic_components/GenericButton\";\n\nclass Dropzone extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hightlight: false,\n      files: [],\n    };\n    this.fileInputRef = React.createRef();\n\n    this.openFileDialog = this.openFileDialog.bind(this);\n    this.onFilesAdded = this.onFilesAdded.bind(this);\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onUpload = this.onUpload.bind(this);\n  }\n  onUpload(event) {\n    event.preventDefault();\n    if (this.props.disabled) return;\n    const files = this.state.files;\n    if (this.state.files) {\n      this.props.onUpload(files);\n      this.props.hideUpload();\n    }\n    this.setState({ highlight: false });\n  }\n\n  openFileDialog() {\n    if (this.props.disabled) return;\n    this.fileInputRef.current.click();\n  }\n\n  onFilesAdded(evt) {\n    evt.preventDefault();\n    if (this.props.disabled) return;\n    const files = evt.target.files;\n    if (this.props.onFilesAdded) {\n      const array = this.fileListToArray(files);\n      this.props.onFilesAdded(array);\n\n      array.forEach((item) => {\n        this.state.files.push(item);\n      });\n    }\n    this.setState({ highlight: false });\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n\n    if (this.props.disabled) return;\n    const files = event.dataTransfer.files;\n    if (this.props.onFilesAdded) {\n      const array = this.fileListToArray(files);\n      this.props.onFilesAdded(array);\n\n      array.forEach((item) => {\n        this.state.files.push(item);\n      });\n    }\n    this.setState({ highlight: false });\n  }\n\n  onDragOver(evt) {\n    evt.preventDefault();\n\n    if (this.props.disabled) return;\n\n    this.setState({ highlight: true });\n  }\n\n  onDragLeave() {\n    this.setState({ highlight: false });\n  }\n\n  fileListToArray(list) {\n    const array = [];\n    for (var i = 0; i < list.length; i++) {\n      array.push(list.item(i));\n    }\n    return array;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          className={`Dropzone ${this.state.hightlight ? \"Highlight\" : \"\"}`}\n          onDragOver={this.onDragOver}\n          onDragLeave={this.onDragLeave}\n          onDrop={this.onDrop}\n          onClick={this.openFileDialog}\n          style={{ cursor: this.props.disabled ? \"default\" : \"pointer\" }}\n        >\n          <input\n            ref={this.fileInputRef}\n            className=\"FileInput\"\n            type=\"file\"\n            multiple\n            onChange={this.onFilesAdded}\n          />\n          <img\n            alt=\"upload\"\n            className=\"Icon\"\n            src=\"baseline-cloud_upload-24px.svg\"\n          />\n          <a>Upload file</a>\n        </div>\n        <MultimediaViewer files={this.state.files} />\n        <form>\n          <GenericButton\n            className=\"submitUpload buttonGeneric\"\n            value=\"Upload file\"\n            onClick={this.onUpload}\n            message=\"Upload file\"\n          />\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Dropzone;\n","import React, { Component } from \"react\";\nimport Dropzone from \"../spec_components/Dropzone\";\nimport \"../../assets/css/DropzonePage.css\";\nimport cache from \"caches/fileCache/FileCache\";\nimport routeCache from \"caches/routeCache/RouteCache\";\nimport { ToastContainer, toast, Bounce } from \"react-toastify\";\nclass DropzonePage extends Component {\n  componentWillMount() {\n    document.addEventListener(\"mousedown\", this.handleClick, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClick, false);\n  }\n  handleClick = (e) => {\n    if (this.node.contains(e.target)) {\n      return;\n    }\n    this.props.showUpload();\n  };\n  render() {\n    function toDo(params) {\n      //EJEMPLO DE FUNCIÓN PARA PASARLE AL onUpload\n      cache.uploadFiles([...params]);\n      toast.info(\"Upload files correctly to the route\", {\n        draggable: true,\n        position: toast.POSITION.TOP_CENTER,\n      });\n      routeCache.setReload(true);\n    }\n    function emptyTrigger() {\n      //Function To Trigger\n    }\n    return (\n      <div ref={(node) => (this.node = node)} className=\"dropzonePage\">\n        <header className=\"CardHeader\"></header>\n        <div className=\"CardZone\">\n          <Dropzone\n            hideUpload={this.props.showUpload}\n            onUpload={toDo}\n            onFilesAdded={emptyTrigger}\n          />\n          {\n            //CON PASAR EL NOMBRE DE LA FUNCIÓN A onUpload YA DEBERÍA DE FUNCIONAR;\n            //NO QUITAR EL EMPTY TRIGGER\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DropzonePage;\n","import React, { Component } from \"react\";\n\nimport MultimediaViewer from \"./MultimediaViewer\";\n\nimport cache from \"caches/fileCache/FileCache\";\nimport GenericButton from \"../generic_components/GenericButton\";\nimport * as RealTimeRoute from \"../../RouteManager/CreateRouteRealTime\";\nimport \"../../assets/css/SaveRoute.css\";\nclass SaveRoute extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nameRoute: \"\",\n      description: \"\",\n      files: [],\n    };\n    //this.fileInputRef = React.createRef();\n  }\n  descriptionToRoute(description) {\n    this.setState({ description: description.target.value });\n  }\n  nameToRute(name) {\n    this.setState({ nameRoute: name.target.value });\n  }\n  saveRouteToPod() {\n    if (this.state.nameRoute !== \"\" && RealTimeRoute.default.getRouteIsOver()) {\n      //RealTimeRoute.default.setNameAndUpload(this.state.nameRoute);\n      //Change setNameAndUpload\n      RealTimeRoute.default.setNameAndUpload(\n        this.state.nameRoute,\n        this.state.description\n      );\n\n      this.props.onFinish();\n    }\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <label htmlFor=\"textInput\">Route Name</label>\n        <input\n          ref={this.fileInputRef}\n          className=\"textInput\"\n          type=\"text\"\n          onChange={this.nameToRute.bind(this)}\n        />\n        <div className=\"textareaDiv\">\n          <label htmlFor=\"textareaInput\" id=\"routeDescriptionInput\">Route description</label>\n          <textarea\n            rows=\"2\"\n            cols=\"25\"\n            className=\"textareaInput\"\n            onChange={this.descriptionToRoute.bind(this)}\n          ></textarea>\n        </div>\n        <form>\n          <GenericButton\n            className=\"submitRoute\"\n            onClick={this.saveRouteToPod.bind(this)}\n            message=\"Save Route\"\n          />\n        </form>\n      </React.Fragment>\n    );\n  }\n}\nexport default SaveRoute;\n","import React, { Component } from \"react\";\nimport SaveRoute from \"../spec_components/SaveRoute\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport * as cache from \"caches/routeCache/RouteCache\";\nimport { useHistory } from \"react-router-dom\";\nimport MapContainer from \"components/map_components/MapContainer.js\";\nimport \"../../assets/css/SaveRoutePage.css\";\nimport \"assets/css/SaveRoutePage.css\";\nconst SaveRoutePage=()=> {\n \n  \n\n  //  this.props.showUpload();\n    \n  \n \n    let history = useHistory();\n    function toDo(params) { //EJEMPLO DE FUNCIÓN PARA PASARLE AL onUpload\n      history.push('/routes');\n      \n      cache.default.setReload(true);\n\n    }\n    function emptyTrigger(){\n      //Function To Trigger\n    }\n    return (\n      \n      <React.Fragment>\n        <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n\n        <div className=\"savePage\" id=\"page-wrap\">\n          <div className=\"cardsave\">\n            <SaveRoute onFinish={toDo} />\n            <div\n              className=\"mapContainerSave\"\n              style={{ position: \"relative\", width: \"40vw\", height: \"40vh\" }}\n            >\n              <MapContainer />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    )\n  \n}\n\nexport default SaveRoutePage;\n","export default class Friend{\n    constructor(webId, name, profilePicture, webIdString) {\n        this.webId=webId;\n        this.name = name;\n        this.profilePicture = profilePicture;\n        this.webIdString = webIdString;\n    }\n\n    toString(){\n        console.log(\"WEB_ID: \"+this.webIdString+\" NAME: \"+this.name+\" PROFILE_PICTURE: \"+this.profilePicture);\n    }\n}","import { useLDflexValue, useLDflexList } from '@solid/react';\nimport Friend from '../Entities/Friend';\n\nconst { default: data } = require('@solid/query-ldflex');\n\n\n/**\n * Functions for retrieving data from the user autenticated.\n */\n\nexport function GetUserName() {\n  const name = useLDflexValue('user.name') || 'unknown';\n  return name.value;\n};\n\nexport async function GetUserProfileImage() {\n  const photo = useLDflexValue('user.vcard_hasPhoto') || 'unknown';\n  return photo.value;\n};\n\n/**\n * Function that retrieves the user list of the user autenticated\n * @returns Promise  Friend[]: array of \"Friend\" entity.\n * \n * For using this method the GetUserFriends the component List was\n * added in generic_components. An example using this List is\n * <List src={GetUserFriends()}></List>\n */\nexport async function GetUserFriends() {\n  const friends = useLDflexList('user.friends');\n  let friendsAux = [];\n\n  //For each value (LDflexValue) in friends(LDflexValue [])\n  friends.forEach(async friendLDflexValue => {\n\n    let friendWebIdLDflexValue = friendLDflexValue.value;\n    const webId = data[friendWebIdLDflexValue];\n    const webIdString = webId.toString();\n\n    //Use the await to retrieve the data from the Promise object.\n    const name = await GetSpecificName(webId);\n    const profilePic = await GetSpecificProfileImage(webId);\n\n    let friendAux = new Friend(webId, name, profilePic, webIdString);\n\n    friendsAux.push(friendAux);\n  });\n\n  return friendsAux;\n};\n\nexport async function GetUserWebId() {\n  const auth = require('solid-auth-client');\n  let session = await auth.currentSession();\n  return session.webId;\n};\n\nexport function GetNumberOfFriends() {\n  const friends = useLDflexList('user.friends');\n  return friends.length;\n};\n\n\n/**\n * Functions for retrieving data from specific users. \n */\n\nexport async function GetSpecificName(profileCardMe) {\n  const personName = await profileCardMe.name;\n\n  try {\n    return personName.value;\n  } catch (TypeError) {\n    const name = await data[profileCardMe].name;\n\n    try {\n      return name.value;\n    } catch (TypeError) {\n      return profileCardMe.toString().substring(8, profileCardMe.toString().length - 1);\n    }\n  }\n\n}\n\nexport async function GetSpecificEmail(profileCardMe){\n  const name = await data[profileCardMe].vcard_hasPhoto;\n  try{\n    return name.value;\n  } catch(TypeError){\n    console.log('A');\n  }\n}\n\nexport async function GetSpecificWebId(webId) {\n\n  return webId.toString().substring(8, webId.toString().length - 1);\n\n}\n\n\n\nexport async function GetSpecificProfileImage(webId) {\n  const photo = await webId.vcard_hasPhoto;\n  try {\n    return photo.value;\n  } catch (TypeError) {\n\n    return \"images/userPictureUndefined\"\n  }\n};\n\n","import { GetUserFriends } from \"../../data-access/UserData\";\n\nexport default {\n  friends: [],\n  async loadFriends() {\n    if (this.friends.length === 0) {\n      this.friends = await GetUserFriends().then((list) => list);\n    }\n  },\n  getFriends() {\n    return this.friends;\n  },\n  clear() {\n    this.friends = [];\n  },\n};\n","import React, { Component } from \"react\";\nimport { Image } from \"semantic-ui-react\";\nimport data from \"@solid/query-ldflex\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\n\nimport \"assets/css/UserDropdown.css\";\n\nclass UserDropdown extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      image:\n        \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n      name: \"\",\n      clicked: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ clicked: false });\n    this.getProfileImage().then((foto) => {\n      if (foto == undefined) {\n        this.setState({\n          image:\n            \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n        });\n      } else this.setState({ image: foto });\n    });\n\n    this.getProfileName().then((name) => {\n      if (name == undefined) {\n        this.setState({ name: \"Welcome, Guest\" });\n      } else this.setState({ name: \"Welcome, \" + name });\n    });\n  }\n\n  async getProfileImage() {\n    try {\n      const { user } = data;\n      const userImage = await user.vcard_hasPhoto;\n      return userImage.value;\n    } catch (error) {\n      //errorToaster(error.message, 'Error');\n    }\n  }\n\n  async getProfileName() {\n    try {\n      const { user } = data;\n      const userName = await user.name;\n      return userName.value;\n    } catch (error) {\n      //errorToaster(error.message, 'Error');\n    }\n  }\n\n  render() {\n    const { clicked } = this.state;\n    return (\n      <div className=\"loginButton\">\n        <div className=\"dropdown\">\n          <img id=\"avataruser\" src={this.state.image} />\n          <span style={{ padding: \"10px\" }}>\n            {this.state.name.split(\" \")[1]}\n          </span>\n          <div className=\"dropdown-content\">\n            <Router>\n              <Link className=\"linkUser\" to=\"/login\">\n                Profile\n              </Link>\n            </Router>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UserDropdown;\n","import React, { useState, useReducer } from \"react\";\n\nimport GenericButton from \"../generic_components/GenericButton\";\nimport FloatingButton from \"../generic_components/FloatingButton\";\nimport BurgerMenu from \"components/generic_components/BurgerMenu\";\nimport \"assets/css/GenericButton.css\";\nimport \"assets/css/MainPage.css\";\nimport MapContainer from \"components/map_components/MapContainer.js\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport DropzonePage from \"./DropzonePage\";\nimport SaveRoutePage from \"./SaveRoutePage\";\n\nimport * as routecache from \"caches/routeCache/RouteCache\";\nimport * as cache from \"caches/friendCache/FriendCache\";\n\nimport { ToastContainer, toast, Zoom, Bounce } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from \"axios\";\nimport UserDropdown from \"../spec_components/UserDropdown\";\n\nconst MainPage = () => {\n  cache.default.loadFriends();\n\n  const [showDropzone, setShowDropzone] = useState(false);\n\n  const getZone = () => {\n    return <DropzonePage showUpload={() => showZone()} />;\n  };\n\n  const showZone = () => {\n    routecache.default.getSelected().then((selected) => {\n      if (selected !== \"\") {\n        setShowDropzone(!showDropzone);\n      } else {\n        toast.error(\"No Route Selected\", {\n          draggable: true,\n          position: toast.POSITION.TOP_CENTER,\n        });\n      }\n    });\n  };\n\n  return (\n    <div className=\"App\" id=\"outer-container\">\n      <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n      <main className=\"main\" id=\"page-wrap\">\n        <FloatingButton showUpload={() => showZone()} />\n        <div>{showDropzone ? getZone() : null}</div>\n\n        <MapContainer />\n      </main>\n      <UserDropdown />\n    </div>\n  );\n};\n\nexport default MainPage;\n","import * as auth from \"solid-auth-client\";\nimport SolidFileClient from \"solid-file-client\";\n\nimport {createContentAcl, createContentAclInbox} from \"../../data-access/FileManager/AclCreator\";\nconst fileClient = new SolidFileClient(auth, { enableLogging: true });\n\n\nexport default {\n  async main() {\n    createFolders();\n  },\n};\n\nasync function createFolders() {\n  let session = await auth.currentSession();\n  if (!session || session.webId === undefined || session.webId === null) {\n    throw new Error(\"You are not logged in.\");\n  }\n\n  let path = session.webId.split(\"profile\")[0];\n  let viade = `${path}viade/routes/`;\n  let routes = `${path}viade/routes/`;  \n  let comments = `${path}viade/comments/`;  \n  let inbox = `${path}viade/inbox/`;  \n  let shared = `${path}viade/shared/`;\n\n  let groups = `${path}viade/groups/`;\n  let resources = `${path}viade/resources/`;\n  \n  \n  createContentAcl(viade, \"viade\");\n\n  fileClient.createFolder(routes).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});  \n  createContentAcl(routes, \"routes\");\n\n  fileClient.createFolder(groups).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});\n  createContentAcl(groups, \"groups\");\n\n  fileClient.createFolder(comments).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});\n  createContentAcl(comments, \"comments\");\n\n  fileClient.createFolder(inbox).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});\n  createContentAclInbox(inbox);\n\n  fileClient.createFolder(shared).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});\n  createContentAcl(shared, \"shared\");\n\n  fileClient.createFolder(resources).then().catch((error)=>{console.log('It looks like we can not create necessary folders inside your pod'); return;});\n  createContentAcl(resources, \"resources\");\n  \n  console.log(\"se ha llamado\");\n}\n\n\n","import React from \"react\";\nimport { LoggedIn, LoggedOut } from \"@solid/react\";\nimport cache from \"../../caches/routeCache/RouteCache\";\nimport * as friendCache from \"caches/friendCache/FriendCache\";\nimport data from \"@solid/query-ldflex\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport * as folderCreator from \"../../data-access/FileManager/FolderCreator\";\nimport \"assets/css/Login.css\";\n\nconst auth = require(\"solid-auth-client\");\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      image:\n        \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n      name: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getProfileImage().then((foto) => {\n      if (foto == undefined) {\n        this.setState({\n          image:\n            \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n        });\n      } else this.setState({ image: foto });\n    });\n\n    this.getProfileName().then((name) => {\n      if (name == undefined) {\n        this.setState({ name: \"Guest\" });\n      }\n      this.setState({ name: \"Welcome, \" + name });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.image !== this.state.image) {\n      this.getProfileImage().then((foto) => {\n        if (foto == undefined) {\n          this.setState({\n            image:\n              \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n          });\n        } else this.setState({ image: foto });\n      });\n\n      this.getProfileName().then((name) => {\n        if (name == undefined) {\n          this.setState({ name: \"Welcome, Guest\" });\n        }\n        this.setState({ name: name });\n      });\n    }\n  }\n\n  async popup(e, auth) {\n    e.preventDefault();\n    let session = await auth.currentSession();\n    let popupUri = \"https://solid.community/common/popup.html\";\n    if (!session) {\n      session = await auth.popupLogin({ popupUri });\n    }\n    this.getProfileImage().then((foto) => {\n      if (foto == undefined) {\n        this.setState({\n          image:\n            \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n        });\n      } else this.setState({ image: foto });\n    });\n\n    this.getProfileName().then((name) => {\n      if (name == undefined) {\n        this.setState({ name: \"Welcome, Guest\" });\n      } else this.setState({ name: \"Welcome, \" + name });\n    });\n\n    //Si sigue fallandote Andrés prueba a poner un await\n    //this.createFolder();\n\n    folderCreator.default.main();\n\n  }\n\n  async logout(e, auth) {\n    e.preventDefault();\n    await auth.logout();\n    this.getProfileImage().then((foto) => {\n      if (foto == undefined) {\n        this.setState({\n          image:\n            \"https://www.lepetitjuriste.fr/wp-content/uploads/2019/02/default_F.png\",\n        });\n      } else this.setState({ image: foto });\n    });\n\n    this.getProfileName().then((name) => {\n      if (name == undefined) {\n        this.setState({ name: \"Welcome, Guest\" });\n      } else this.setState({ name: \"Welcome, \" + name });\n    });\n    cache.clear();\n    friendCache.default.clear();\n  }\n\n  async getProfileImage() {\n    try {\n      const { user } = data;\n      const userImage = await user.vcard_hasPhoto;\n      return userImage.value;\n    } catch (error) {\n      //errorToaster(error.message, 'Error');\n    }\n  }\n\n  async getProfileName() {\n    try {\n      const { user } = data;\n      const userName = await user.name;\n\n      return userName.value;\n    } catch (error) {\n      //errorToaster(error.message, 'Error');\n    }\n  }\n  async createFolder() {\n    folderCreator.default\n      .main()\n      .then()\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  viewImageLoaded = () => {};\n  render() {\n    const { image } = this.state;\n\n    return (\n      <div className=\".bodyContainer\" id=\"outer-container\">\n        <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n        <div className=\"container-login100\" id=\"page-wrap\">\n          <div className=\"wrap-login100\">\n            <div className=\"login100-pic js-tilt\" data-tilt>\n              <img src={image} alt=\"IMG\" />\n            </div>\n            <form className=\"login100-form validate-form\">\n              <span className=\"login100-form-title\">Pod Login</span>\n              <LoggedOut>\n                <div className=\"wrap-input100\">\n                  <input\n                    id=\"inputLogin\"\n                    className=\"input100\"\n                    list=\"providers\"\n                    type=\"text\"\n                    name=\"provider\"\n                    placeholder=\"Provider\"\n                  />\n                  <datalist id=\"providers\">\n                    <option value=\"https://solid.community/\" />\n                    <option value=\"https://inrupt.net/\" />\n                  </datalist>\n                  <span className=\"focus-input100\"></span>\n                </div>\n                <button\n                  className=\"login100-form-btn\"\n                  onClick={(e) => this.popup(e, auth)}\n                >\n                  Log In\n                </button>\n              </LoggedOut>\n              <LoggedIn>\n                <p>{this.state.name}</p>\n\n                \n\n                <button\n                  className=\"login100-form-btn\"\n                  onClick={(e) => this.logout(e, auth)}\n                >\n                  Log out\n                </button>\n              </LoggedIn>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\n\nimport Login from \"../login/Login\";\nimport * as cache from \"caches/friendCache/FriendCache\";\n\nconst LoginPage = () => {\n  cache.default.loadFriends();\n  return <Login></Login>;\n};\nexport default LoginPage;\n","import React, { Component } from \"react\";\nimport { Icon, Card, Image, Popup } from \"semantic-ui-react\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport \"assets/css/Card.css\";\n\nclass CardLayout extends Component {\n  render() {\n    let linkHide = this.props.link === undefined;\n    let externalHide = this.props.externalLink === undefined;\n    let detailsHide = this.props.detailsLink === undefined;\n    let shareHide = this.props.shareIconName === undefined;\n    return (\n      <div>\n        <Card className=\"claim_Card\">\n          <link\n            rel=\"stylesheet\"\n            href=\"https://cdn.jsdelivr.net/npm/semantic-ui@2.4.1/dist/semantic.min.css\"\n          />\n          <Image className=\"ui medium image\" src={this.props.image} />\n          <Card.Content>\n            <Card.Header>{this.props.header}</Card.Header>\n            <Card.Meta>\n              <span className=\"date\">{this.props.date}</span>\n            </Card.Meta>\n            <Card.Description>{this.props.description}</Card.Description>\n          </Card.Content>\n          <Card.Content extra>\n            <Router>\n              <Link\n                className={this.props.classLink}\n                hidden={linkHide}\n                to={this.props.link}\n                onClick={this.props.action}\n              >\n                <Popup\n                  trigger={<Icon name={this.props.iconName} />}\n                  mouseEnterDelay={250}\n                  content={this.props.popupContent}\n                  position=\"bottom center\"\n                />\n              </Link>\n\n              <a\n                className={this.props.externalClassName}\n                hidden={externalHide}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={this.props.externalLink}\n                onClick={this.props.externalAction}\n              >\n                <Popup\n                  trigger={<Icon name={this.props.externalIconName} />}\n                  mouseEnterDelay={250}\n                  content={this.props.externalPopupContent}\n                  position=\"bottom center\"\n                />\n              </a>\n\n              <Link\n                className={this.props.detailsClassName}\n                hidden={detailsHide}\n                to={this.props.detailsLink}\n                onClick={this.props.detailsAction}\n              >\n                <Popup\n                  trigger={<Icon name={this.props.detailsIconName} />}\n                  mouseEnterDelay={250}\n                  content={this.props.detailsPopupContent}\n                  position=\"bottom center\"\n                />\n              </Link>\n              <Link\n                className=\"linkRoute\"\n                hidden={shareHide}\n                to=\"/shareroute\"\n                onClick={this.props.shareAction}\n              >\n                <Popup\n                  trigger={<Icon name={this.props.shareIconName} />}\n                  mouseEnterDelay={250}\n                  content=\"Share the route with with friends\"\n                  position=\"bottom center\"\n                />\n              </Link>\n            </Router>\n          </Card.Content>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default CardLayout;\n","import React from \"react\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport CardLayout from \"../generic_components/Card\";\nimport * as cache from \"caches/friendCache/FriendCache\";\n\nimport \"../../assets/css/FriendList.css\";\n\nvar friends = [];\n\nconst FriendsPage = () => {\n  friends = cache.default.getFriends();\n\n  return (\n    <div className=\"bodyFriends\" id=\"outer-container\">\n      <main>\n        <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n        <div className=\"App friends\" id=\"page-wrap\">\n          <section className=\"sectionFriends\">\n            <ul className=\"friendContainer\">\n              {friends.map((item, index) => {\n                return (\n                  <li id={\"friend\" + index} key={index} className=\"liCard\">\n                    <CardLayout\n                      image={item.profilePicture}\n                      header={item.name}\n                      description={item.webIdString}\n                      externalLink={item.webIdString}\n                      externalIconName=\"user\"\n                      externalPopupContent=\"Go to profile\"\n                      numberOfFriends={item.numberOfFriends}\n                    />\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default FriendsPage;\n","import React from \"react\";\nimport 'assets/css/SearchBar.css';\n\nexport default class SearchBar extends React.Component{\n\n    render(){\n        return (\n        <input \n            type=\"text\" \n            id=\"searchBar\" \n            value={this.props.value}\n            onChange={this.props.action}\n            placeholder=\"Search for names..\" \n            title=\"Type in a name\"\n        />\n        );\n    }\n}\n","import React, { Component } from 'react'\nimport { Form } from 'semantic-ui-react'\nimport * as gateway from '../../data-access/gateways/CommentsGateway'\nimport Comment from '../../Entities/Comment'\nimport * as cache from 'caches/routeCache/RouteCache'\n\n\nclass MyForm extends Component {\n  state = {message: \"\"}\n\n  handleChange = (e, { name, value }) => this.setState({ [name]: value })\n\n  handleSubmit = () => {\n    const {message} = this.state\n\n    //Create the comment.\n    let author = JSON.parse(localStorage.getItem(\"session\")).webId;\n    let url = cache.default.getSelectedDetails().commentsUrl;\n    var comment = new Comment(url, message, author, \"\");\n\n    gateway.postCommentInRoute(url, comment, () =>{})\n    //Reset the text area\n    this.setState({message: ''});\n  }\n\n  render() {\n    const {message} = this.state\n\n    return (\n      <div>\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Group>\n            <Form.TextArea\n              placeholder='Type your message here!'\n              name='message'\n              value={message}\n              onChange={this.handleChange}\n            />\n            <Form.Button content='Submit' />\n          </Form.Group>\n        </Form>\n      </div>\n    )\n  }\n}\n\nexport default MyForm;\n","import React from \"react\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {Comment} from 'semantic-ui-react';\nimport '../../assets/css/commentsContainer.css';\nimport MyForm  from '../generic_components/MyForm';\n\nclass MyCommentInfiniteScroll extends React.Component {\n  state = {\n    items: this.props.content.slice(0, 20),\n    array_index: 20,\n    hasMore: true,\n  };\n\n\n  fetchMoreData = () => {\n    // a fake async api call like which sends\n    // 20 more records in 1.5 secs\n    setTimeout(() => {\n      this.setState({\n        items: this.state.items.concat(\n          this.props.content.slice(\n            this.state.array_index,\n            this.state.array_index + 20\n          )\n        ),\n        array_index: this.state.array_index + 20,\n      });\n    }, 100);\n    if (this.props.content.length <= this.state.array_index) {\n      this.setState({\n        hasMore: false,\n      });\n    }\n  };\n  \n  viewLoaded = (items) => {\n    return(\n      <div>\n        <InfiniteScroll\n          dataLength={items.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.hasMore}\n          loader={<h4>Loading...</h4>}\n          endMessage={\n            <p style={{ textAlign: \"center\" }}>\n              <b>Yay! You have seen it all</b>\n            </p>\n          }\n          scrollableTarget={this.props.scrollParent}\n        >\n          <Comment.Group>\n            <link\n              rel=\"stylesheet\"\n              href=\"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css\"\n            />\n            {items.map((i, index) => (\n              <div className=\"commentsContainer\" key={index}>\n                <Comment>\n                  <Comment.Content>\n                    <Comment.Author as = 'span'>{ i.jsonComment.author.substring(8, i.jsonComment.author.length - 1)\n                        .split('.')[0]}</Comment.Author>\n                    <Comment.Metadata>\n                      <div>{i.jsonComment.dateCreated}</div>\n                    </Comment.Metadata>\n                    <Comment.Text>{i.jsonComment.text}</Comment.Text>\n                  </Comment.Content>\n                </Comment>\n              </div>\n            ))}\n          </Comment.Group>\n        </InfiniteScroll>\n        <MyForm/>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n         <React.Fragment>\n          {this.viewLoaded(this.props.content)}\n        </React.Fragment>\n    );\n  }\n}\n\nexport default MyCommentInfiniteScroll;\n","import React from \"react\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nclass MyImageInfiniteScroll extends React.Component {\n  state = {\n    items: this.props.content.slice(0, 20),\n    array_index: 20,\n    hasMore: true,\n  };\n\n  fetchMoreData = () => {\n    // a fake async api call like which sends\n    // 20 more records in 1.5 secs\n    setTimeout(() => {\n      this.setState({\n        items: this.state.items.concat(\n          this.props.content.slice(\n            this.state.array_index,\n            this.state.array_index + 20\n          )\n        ),\n        array_index: this.state.array_index + 20,\n      });\n    }, 100);\n    if (this.props.content.length <= this.state.array_index) {\n      this.setState({\n        hasMore: false,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <InfiniteScroll\n          dataLength={this.state.items.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.hasMore}\n          loader={<h4>Loading...</h4>}\n          endMessage={\n            <p style={{ textAlign: \"center\" }}>\n              <b>Yay! You have seen it all</b>\n            </p>\n          }\n          scrollableTarget={this.props.scrollParent}\n        >\n          {this.state.items.map((i, index) => (\n            <div key={index}>\n              <img src={i.filePath} alt=\"hola\" width=\"200\" height=\"200\" />\n              <span>\n                Published: {i.dateAttached.toDateString()},{\" \"}\n                {i.dateAttached.getHours()}:{i.dateAttached.getMinutes()}\n              </span>\n            </div>\n          ))}\n        </InfiniteScroll>\n      </div>\n    );\n  }\n}\n\nexport default MyImageInfiniteScroll;\n","import React from \"react\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nclass MyVideoInfiniteScroll extends React.Component {\n  state = {\n    items: this.props.content.slice(0, 20),\n    array_index: 20,\n    hasMore: true,\n  };\n\n  fetchMoreData = () => {\n    // a fake async api call like which sends\n    // 20 more records in 1.5 secs\n    setTimeout(() => {\n      this.setState({\n        items: this.state.items.concat(\n          this.props.content.slice(\n            this.state.array_index,\n            this.state.array_index + 20\n          )\n        ),\n        array_index: this.state.array_index + 20,\n      });\n    }, 100);\n    if (this.props.content.length <= this.state.array_index) {\n      this.setState({\n        hasMore: false,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <InfiniteScroll\n          dataLength={this.state.items.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.hasMore}\n          loader={<h4>Loading...</h4>}\n          endMessage={\n            <p style={{ textAlign: \"center\" }}>\n              <b>Yay! You have seen it all</b>\n            </p>\n          }\n          scrollableTarget={this.props.scrollParent}\n        >\n          {this.state.items.map((i, index) => (\n            <div key={index}>\n              <video width=\"320\" height=\"240\" controls>\n                <source src={i.filePath} type=\"video/mp4\" />\n                Your browser does not support the video tag.\n              </video>\n              <span>\n                Published: {i.dateAttached.toDateString()},{\" \"}\n                {i.dateAttached.getHours()}:{i.dateAttached.getMinutes()}\n              </span>\n            </div>\n          ))}\n        </InfiniteScroll>\n      </div>\n    );\n  }\n}\n\nexport default MyVideoInfiniteScroll;\n","import React from \"react\";\nimport { Tab } from \"semantic-ui-react\";\nimport MyCommentInfiniteScroll from \"../generic_components/InfiniteScrollComment\";\nimport MyImageInfiniteScroll from \"../generic_components/InfiniteScrollImage\";\nimport MyVideoInfiniteScroll from \"../generic_components/InfiniteScrollVideo\";\nimport * as gateway from \"../../data-access/gateways/CommentsGateway\";\nimport * as cache from \"../../caches/fileCache/FileCache\";\n\nlet images = [];\nlet videos = [];\n\nclass MyTab extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      comentarios: [],\n    };\n  }\n\n  panes = () => {\n    return [\n      {\n        menuItem: \"Comentarios\",\n        pane: {\n          key: \"tabComentarios\",\n          content: (\n            <div\n              className=\"routeComments\"\n              id=\"scrollableCommentDiv\"\n              style={{ overflow: \"scroll\", height: 400 }}\n            >\n              <MyCommentInfiniteScroll\n                content={this.state.comentarios}\n                scrollParent=\"scrollableCommentDiv\"\n              />\n            </div>\n          ),\n        },\n      },\n      {\n        menuItem: \"Imagenes\",\n        pane: {\n          key: \"tabImagenes\",\n          content: (\n            <div\n              className=\"routeImages\"\n              id=\"scrollableImageDiv\"\n              style={{ overflow: \"scroll\", height: 400 }}\n            >\n              <MyImageInfiniteScroll\n                content={images}\n                scrollParent=\"scrollableImageDiv\"\n              />\n            </div>\n          ),\n        },\n      },\n      {\n        menuItem: \"Videos\",\n        pane: {\n          key: \"tabVideos\",\n          content: (\n            <div\n              className=\"routeVideos\"\n              id=\"scrollableVideoDiv\"\n              style={{ overflow: \"scroll\", height: 400 }}\n            >\n              <MyVideoInfiniteScroll\n                content={videos}\n                scrollParent=\"scrollableVideoDiv\"\n              />\n            </div>\n          ),\n        },\n      },\n    ];\n  };\n\n  componentDidMount() {\n    gateway\n      .getCommentsForRoute(this.props.route.commentsUrl, () => {})\n      .then((comments) => {\n        this.setState({\n          comentarios: comments,\n        });\n      });\n  }\n\n  render() {\n    images.length = 0;\n    videos.length = 0;\n\n    let multimedia = [];\n\n    multimedia = cache.default.getFilePathsForRoute(this.props.route);\n    console.log(multimedia)\n    multimedia.forEach((element) => {\n      if (element.contentType.includes(\"image\")) {\n        images.push(element);\n      } else if (element.contentType.includes(\"video\")) {\n        videos.push(element);\n      }\n    });\n    return (\n      <div className=\"MyTabDiv\">\n        <link\n          rel=\"stylesheet\"\n          href=\"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css\"\n        />\n        <Tab panes={this.panes()} renderActiveOnly={false} />\n      </div>\n    );\n  }\n}\n\nexport default MyTab;\n","import React from \"react\";\nimport MyTab  from '../generic_components/MyTab';\nimport CustomLoader from 'components/generic_components/CustomLoader';\nimport * as cache from 'caches/routeCache/RouteCache'\n\nimport \"../../assets/css/RouteDetails.css\";\n\nclass RouteDetails extends React.Component {\n    state = {\n        loading: true,\n        details: \"\"\n    }\n\n    \n  componentWillMount(){\n      document.addEventListener('mousedown',this.handleClick, false);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener('mousedown', this.handleClick, false);\n  }\n  handleClick =(e)=>{\n    if(this.node.contains(e.target)){\n      return;\n    }\n\n    this.props.showUpload();\n    \n  }\n    handleSession = () => {\n        this.props.history.push('/login');\n    }\n\n  componentDidMount() {\n    let detail = cache.default.getSelectedDetails();\n    this.setState({ loading: false, details: detail });\n  };\n\n    viewLoaded = (detail) => {\n        return(\n            <div ref = {node => this.node = node} className = \"routeDetails\">\n                <div className = \"DetailsZone\">\n                    <h2>{detail.name}</h2>\n                    <MyTab route = {detail}/>  \n                </div>\n            </div>\n        );\n    }\n  render(){\n    const {loading} = this.state;\n    return(\n      <React.Fragment>\n        {loading ? <CustomLoader/> : this.viewLoaded(this.state.details)}\n      </React.Fragment>    \n      );\n    }\n}\n\nexport default RouteDetails;\n","import File from \"../Entities/File\";\nimport BasicRoute from \"../Entities/BasicRoute\";\nimport RouteFile from \"../Entities/RouteFile\";\n\nconst auth = require(\"solid-auth-client\");\nconst FC = require(\"solid-file-client\");\nconst fc = new FC(auth);\n\nexport async function loadSpecificUserRoutesFiles(urlRoute) {\n  let routes = [];\n  let urls = [];\n  let routesFolder = urlRoute;\n\n  if (\n    await fc\n      .itemExists(urlRoute)\n      .then()\n      .catch((error) => {\n        console.log(\n          \"You have not being granted the permissions to read this route\"\n        );\n      })\n  ) {\n    try {\n      let fileContent = await fc.readFile(urlRoute);\n\n      urls.push(urlRoute);\n      routes.push(fileContent);\n    } catch (error) {\n      console.log(\"The folder couldn't be read\");\n      console.log(error); // A full error response\n      console.log(error.status); // Just the status code of the error\n      console.log(error.message); // Just the status code and statusText\n    }\n  } else {\n    console.log(\"user has no routes directory\");\n  }\n\n  let rou = jsonToEntity(routesToJson(routes, urls), urls);\n  localStorage.setItem(\"urls\", JSON.stringify(urls));\n\n  return rou;\n}\n\nfunction routesToJson(routes, urls) {\n  let jsonRoutes = [];\n  for (let i = 0; i < routes.length; i++) {\n    try {\n      let route = JSON.parse(routes[i]);\n      jsonRoutes.push(route);\n    } catch (e) {\n      urls.splice(i, 1);\n      console.log(\n        \"Route \" +\n          i +\n          \" couldn't be transformed to json because the format is wrong\"\n      );\n    }\n  }\n  return jsonRoutes;\n}\n\nfunction jsonToEntity(routes, urls) {\n  let entRoutes = [];\n  let entFiles = [];\n\n  for (let i = 0; i < routes.length; i++) {\n    try {\n      let name = routes[i].name;\n      let it = routes[i].points;\n      let desc = routes[i].description;\n      let comUrl;\n      if (routes[i].hasOwnProperty(\"comments\")) {\n        if (routes[i].comments != undefined) {\n          comUrl = routes[i].comments;\n        } else {\n          comUrl = \"\";\n        }\n      } else {\n        comUrl = \"\";\n      }\n\n      let route = new BasicRoute(name, it, desc);\n      route.commentsUrl = comUrl;\n      route.setUrl(urls[i]);\n      route.setJsonFormat(routes[i]);\n      entRoutes.push(route);\n\n      if (routes[i].media) {\n        entFiles.push(getMediaAttachedToRoute(routes[i], urls[i]));\n      }\n    } catch (e) {\n      console.log(\n        \"Route \" + i + \" couldn't be parsed because the format is wrong\"\n      );\n      console.log(e);\n    }\n  }\n\n  return { routes: entRoutes, files: entFiles };\n}\n\nexport function getMediaAttachedToRoute(route, url) {\n  let routeFile = new RouteFile(url, []);\n\n  for (let i = 0; i < route.media.length; i++) {\n    let path = route.media[i][\"@id\"];\n\n    if (\n      fc\n        .itemExists(path)\n        .then()\n        .catch((error) =>\n          console.log(\"You have no permissions to read the media files\")\n        )\n    ) {\n      let date = new Date(route.media[i][\"dateTime\"]);\n      let file = new File(path, date);\n      routeFile.addFilePath(file);\n    }\n  }\n\n  return routeFile;\n}\n","import { loadSpecificUserRoutesFiles } from \"RouteManager/ListSpecificUserRoutes\";\nimport * as cache from \"caches/routeCache/RouteCache\";\nimport * as filecache from \"caches/fileCache/FileCache\";\nconst auth = require(\"solid-auth-client\");\nconst FC = require(\"solid-file-client\");\nconst fc = new FC(auth);\n\n/**\n * Method that retrieves all the routes from the shared files\n * and lists them.\n *\n * @param {String} routesURL url where the user\n * has the shared routes stored\n * for example \"https://testingclrmrnd.inrupt.net/viade/shared/\"\n */\nexport async function sharedRoutesList(routesURL) {\n\n  const sharedPath = routesURL;\n  const url = await retrieveSharedRoutes(sharedPath);\n\n  let routes = [];\n  let routes_routes = [];\n  let routes_files = [];\n  if (url) {\n    for (let i = 0; i < url.length; i++) {\n      //now, retrieving the specific route from the different urls\n      let urlRoute = url[i];\n\n      let route = await loadSpecificUserRoutesFiles(urlRoute);\n\n      routes.push(route);\n\n      routes_routes = [...routes_routes, ...route.routes];\n      routes_files = [...routes_files, ...route.files];\n    }\n    console.table(routes_routes);\n    filecache.default.addFilePaths(routes_files);\n    cache.default.setSharedRoutes(routes_routes);\n  }\n  return routes;\n}\n\n/**\n * Method that retrieves the file of the shared routes\n * from the folder shared of the user autenticated\n *\n * Example: \"https://testingclrmrnd.inrupt.net/viade/shared/\"\n * @param {String} sharedPath\n */\n\nexport async function retrieveSharedRoutes(sharedPath) {\n  let routesJSONS = [];\n  let urlsToReturn = [];\n  var urls_cache = JSON.parse(localStorage.getItem(\"urls\"));\n\n  let content = await fc\n    .readFolder(sharedPath)\n    .then()\n    .catch((err) => {\n      console.log(\"There was a problem reading \" + sharedPath);\n      return;\n    });\n\n  try {\n    let files = content.files;\n\n    for (let i = 0; i < files.length; i++) {\n      let fileContent = await fc.readFile(files[i].url);\n\n      routesJSONS.push(fileContent);\n      const url = jsonURLRetrieve(toJson(fileContent));\n      for (let i = 0; i < url.length; i++) {\n        urlsToReturn.push(url[i]);\n      }\n\n    }\n\n    //localStorage.setItem(\"urls\", JSON.stringify(urls_cache));\n\n    //return urlsToReturn;\n    const url = jsonURLRetrieve(toJson(routesJSONS));\n    return urlsToReturn;\n\n  } catch (error) {\n    console.log(\"It could not be read the folder \" + sharedPath);\n  }\n}\n\n/**\n * Method that retrieves the urls\n * of the file sharedroutes.js\n * @param {} routes\n */\nfunction jsonURLRetrieve(routes) {\n  let routesShared = [];\n  let routesURL = [];\n\n  for (let i = 0; i < routes.length; i++) {\n    try {\n\n      let routesRetrieved = routes[i].routes;\n\n      for (let i = 0; i < routesRetrieved.length; i++) {\n        const routeURL = routesRetrieved[i][\"@id\"];\n        routesURL.push(routeURL);\n      }\n\n      routesShared.push(routes[i]);\n      return routesURL;\n    } catch (e) {\n      // console.log(\n      //  \"Route \" + i + \" couldn't be parsed because the format is wrong\"\n      //);\n      // console.log(e);\n    }\n  }\n\n  //return { routes: entRoutes, files: entFiles };\n}\n\n//lo hace bien\nfunction toJson(routes) {\n  let jsonRoutes = [];\n  // for (let i = 0; i < routes.length; i++) {\n  let routeA = \"\";\n  try {\n    routeA = routes; //routes[i]\n    let route = JSON.parse(routeA);\n    jsonRoutes.push(route);\n  } catch (e) {\n    console.log(\n      \"Route \" +\n      routeA +\n      \" couldn't be transformed to json because the format is wrong\"\n    );\n  }\n  //}\n  return jsonRoutes;\n}\n","import React from \"react\";\nimport \"assets/css/Routes.css\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport SearchBar from \"../generic_components/SearchBar\";\nimport CardLayout from \"../generic_components/Card\";\nimport RouteDetails from \"./RouteDetails\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport { Icon, Card, Image, Popup } from \"semantic-ui-react\";\nimport * as cache from \"caches/routeCache/RouteCache\";\n\nimport { sharedRoutesList } from \"ShareManager/RetrieveRoute\";\n\nclass RoutesPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      routes: \"\",\n      sharedRoutes: \"\",\n      search: \"\",\n      showDetails: false,\n    };\n  }\n\n  urls = [];\n  updateSearch(event) {\n    this.setState({ search: event.target.value.substr(0, 20) });\n  }\n  componentDidMount() {\n    cache.default.getRoutes(this.handleSession).then((rutas) => {\n      this.setState({ loading: true, routes: rutas });\n      var session = JSON.parse(localStorage.getItem(\"session\"));\n      if (session) {\n        var path =\n          session.webId.substring(0, session.webId.length - 16) +\n          \"/viade/shared/\";\n        sharedRoutesList(path).then(() => {\n          cache.default.getSharedRoutes().then((routes) => {\n            console.log(routes)\n            this.setState({ loading: false, sharedRoutes: routes });\n          });\n        });\n      }\n    });\n\n    cache.default.setReload(false);\n  }\n\n  viewDetails(route) {\n    cache.default.setSelectedDetails(route);\n    this.setState({\n      showDetails: true,\n    });\n  }\n\n  getDetailsZone() {\n    return (\n      <RouteDetails\n        showUpload={() => {\n          this.setState({\n            showDetails: !this.state.showDetails,\n          });\n        }}\n      />\n    );\n  }\n\n  handleSession = () => {\n    this.props.history.push(\"/login\");\n  };\n\n  viewLoaded = (routes, sharedRoutes) => {\n    console.log(sharedRoutes)\n    let filteredRoutes = routes.filter((ruta) => {\n      return (\n        ruta.name.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1\n      );\n    });\n\n    let filteredSharedRoutes = sharedRoutes.filter((ruta) => {\n      return (\n        ruta.name.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1\n      );\n    });\n\n    return (\n      <div className=\"bodyRoutes\" id=\"outer-container\">\n        {this.state.showDetails ? this.getDetailsZone() : null}\n\n        <main>\n          <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n          <div className=\"App routes\" id=\"page-wrap\">\n            <header className=\"bodyHeader\"></header>\n            <section className=\"sectionRoutes\">\n              <SearchBar\n                value={this.state.search}\n                action={this.updateSearch.bind(this)}\n                list=\"listRoute\"\n              />\n              <h1>My routes</h1>\n              <ul className=\"listRoute\">\n                {filteredRoutes.map((item, index) => {\n                  return (\n                    <li id={\"route\" + index} key={index} className=\"liCard\">\n                      <div className=\"routeListElementContainter\">\n                        <CardLayout\n                          header={item.name}\n                          image=\"images/daddy.jpg\"\n                          link=\"/\"\n                          className=\"linkRoute\"\n                          description={item.description}\n                          action={(e) => {\n                            cache.default.setSelected(routes[index]);\n                          }}\n                          iconName=\"map\"\n                          popupContent=\"Show on map\"\n                          detailsClassName=\"linkRoute\"\n                          detailsLink=\"/routes\"\n                          detailsAction={(e) => {\n                            this.viewDetails(routes[index]);\n                          }}\n                          detailsIconName=\"info\"\n                          detailsPopupContent=\"Show messages and multimedia\"\n                          shareIconName=\"share\"\n                          shareAction={(e) => {\n                            cache.default.setSelectedToShare(item.url);\n                          }}\n                        />\n                      </div>\n                    </li>\n                  );\n                })}\n              </ul>\n              <h1>Shared routes</h1>\n              <ul className=\"listRoute\">\n                {filteredSharedRoutes.map((item, index) => {\n                  return (\n                    <li id={\"route\" + index} key={index} className=\"liCard\">\n                      <div className=\"routeListElementContainter\">\n                        <CardLayout\n                          header={item.name}\n                          image=\"images/daddy.jpg\"\n                          link=\"/\"\n                          className=\"linkRoute\"\n                          description={item.description}\n                          action={(e) => {\n                            cache.default.setSelected(sharedRoutes[index]);\n                          }}\n                          iconName=\"map\"\n                          popupContent=\"Show on map\"\n                          detailsClassName=\"linkRoute\"\n                          detailsLink=\"/routes\"\n                          detailsAction={(e) => {\n                            this.viewDetails(sharedRoutes[index]);\n                          }}\n                          detailsIconName=\"info\"\n                          detailsPopupContent=\"Show messages and multimedia\"\n                        />\n                      </div>\n                    </li>\n                  );\n                })}\n              </ul>\n            </section>\n          </div>\n        </main>\n      </div>\n    );\n  };\n  viewCharge = () => {\n    return (\n      <div className=\"bodyRoutes\" id=\"outer-container\">\n        <CustomLoader />\n      </div>\n    );\n  };\n  render() {\n    const { loading } = this.state;\n    return (\n      <React.Fragment>\n        {loading ? (\n          <CustomLoader />\n        ) : (\n          this.viewLoaded(this.state.routes, this.state.sharedRoutes)\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default RoutesPage;\n","import React from \"react\";\nimport \"assets/css/About.css\";\nimport CustomLoader from 'components/generic_components/CustomLoader';\nimport BurgerMenu from 'components/generic_components/BurgerMenu';\nimport CardLayout from 'components/generic_components/Card';\n\nclass AboutPage extends React.Component {\n  \n  constructor(props){\n    super(props);\n\n    this.state = {\n      loading: true,\n    };\n  }\n  \n  componentDidMount() {\n      this.setState({ loading: false });\n  }\n  \n  viewLoaded() {\n    let developers = [\n    {\n      image: 'images/developers/andres.jpg',\n      name: \"Andrés\",\n      meta: \"Back-end\",\n      description: \"Andrés pretty much carried the team through the early parts of thinking about implementing SOLID. He's the one that focused the most on following the specifications we had to, and reprimanded us when we were straying from the righteous path. Also, he had the idea for the logo. It's a good logo.\",\n      link: \"mailto:UO264345@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/fernando.jpg',\n      name: \"Fernando\",\n      meta: \"UI & UX designer\",\n      description: \"Fernando has programmed in 15+ different programming languages. He has yet to make something useful. In the repo, he's somehow deleted more than 30,000 lines of code, and added around 17,000. At least the app's pretty, he thinks.\",\n      link: \"mailto:UO266754@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/guillermo.png',\n      name: \"Guillermo\",\n      meta: \"Page and view designer\",\n      description: \"Guille started learning react like a champ from day zero. He's got the better understanding of the mess that is working with react. If you don't know why your view isn't updating, he's probably your guy.\",\n      link: \"mailto:UO264207@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/miguel.png',\n      name: \"Miguel\",\n      meta: \"Back-end\",\n      description: \"Fueling himself with caffeine, Miguel has tried (and succeded) to crack the hardest problems we faced on the back-end. Mainly, to get it working. At least sometimes. He's responsible for the upcoming feature of recording real-time routes. That's dedication.\",\n      link: \"mailto:UO258629@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/violeta.jpg',\n      name: \"Violeta\",\n      meta: \"Back-end\",\n      description: \"Violeta is the quietest member of the group, but she does the work she's got like anybody else. Mainly, this work has been route listing and some testing that you don't get to see. Maybe she's too busy thinking about the code to talk. Or could it be puppies?\",\n      link: \"mailto:UO258454@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/clara.jpg',\n      name: \"Clara\",\n      meta: \"Back-end\",\n      description: \"Clara is the one to thank for when you're logging in, sharing your routes or commenting on other people's shared routes. Basically, thank her if you have any friends using this app with you.\",\n      link: \"mailto:UO264958@uniovi.es\",\n      numberOfFriends: \"\"\n    }, {\n      image: 'images/developers/alejandro.png',\n      name: \"Alejandro\",\n      meta: \"User interaction\",\n      description: \"He may seem jovial at first, but be sure to not touch Alex's buttons. Or do, if you want to use ViaDe. He's somehow responsible for most of them. The expanding, floating button, the hamburguer menu... Great, now I'm hungry.\",\n      link: \"mailto:UO264255@uniovi.es\",\n      numberOfFriends: \"\"\n    }, ];\n    \n    return(\n    <div className=\"bodyAbout\" id=\"outer-container\">\n      <main>\n          <BurgerMenu \n          pageWrapId=\"page-wrap\"\n          container=\"outer-container\"\n          />\n        <div className=\"App about\" id=\"page-wrap\">\n          <header className=\"bodyHeader\"></header>\n          <section className=\"sectionViade\">\n            <h2>ViaDe</h2>\n            <p>Do you walk? Run? Bike? With ViaDe, you'll be able to create, manage, and share routes you take with your friends! Login credentials and data storage and retrieval is done using Solid, an industry-leading technology backed by the creator of the World Wide Web himself, Tim Berners-Lee.</p>\n            <p>En2B is a group of Computer Engineering students from Asturias, Spain. We're really excited to bring the world our web application, made with lots of effort and love.</p>\n          </section>\n          <section className=\"sectionDevelopers\">\n            <h2> The team </h2>\n            <ul className = \"developerContainer\">\n            {developers.map((item, index)=>{\n                   return (\n                     <li id={\"developer\"+index} key={index} className = \"liCard\">\n                       <CardLayout\n                       image = {item.image}\n                       header = {item.name}\n                       date = {item.meta}\n                       description = {item.description}\n                       externalLink = {item.link}\n                       externalIconName='mail'\n                       externalPopupContent=\"Contact email\"\n                       />\n                     </li>\n                   );\n                 })}\n              </ul>\n          </section>\n        </div>\n      </main>\n    </div>\n    );\n  }\n\n  viewCharge = ()=>{\n    return(\n      <div className=\"bodyAbout\" id=\"outer-container\">\n        <CustomLoader/>\n      </div>\n    );\n  }\n\n  render()\n  {\n    const {loading} = this.state;\n\n    return ( \n      <React.Fragment>\n        {loading ? <CustomLoader/> : this.viewLoaded()}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AboutPage;\n","export default class Notification{\n    constructor(urlNotification, typeNotification, urlResource, authorName, authorWebId, date) {\n\n        this.urlNotification = urlNotification;\n        this.typeNotification = typeNotification;\n\n        this.urlResource = urlResource;\n\n        this.authorName = authorName;\n        this.authorWebId = authorWebId;\n\n        this.date = date;\n\n        if (typeNotification == \"ROUTE\"){\n            this.message = authorName + \" has shared a route with you.\";\n        }\n    }\n}","export default {\n  notifications: [],\n  async getNotifications(callback) {\n    return this.notifications;\n  },\n  setNotifications(result) {\n    this.notifications.push(result);\n  },\n  clear() {\n    this.notifications = [];\n  },\n};\n","import { fetchDocument } from \"tripledoc\";\nimport { ldp } from \"rdf-namespaces\";\nimport Notification from \"Entities/Notification\";\nimport { GetSpecificName, GetSpecificWebId } from \"data-access/UserData\";\n\nimport cache from \"caches/notificationCache/NotificationCache\";\n\nconst $rdf = require(\"rdflib\");\nconst ns = require(\"solid-namespace\")($rdf);\n\nconst auth = require(\"solid-auth-client\");\nconst FC = require(\"solid-file-client\");\nconst fc = new FC(auth);\n\nconst request = require(\"request\");\n\n/**\n * Returns the current list of notifications.\n * Ex: \"https://testingclrmrnd.inrupt.net/viade/inbox/\"\n */\nexport async function getNotificationDocuments(inboxPath, webIdAuthor) {\n  var inbox = inboxPath;\n\n  var containerDoc = await fetchDocument(inbox)\n    .then()\n    .catch((err) => {\n      console.log(\"Error\");\n      return;\n    });\n\n  //if the document exists\n  if (containerDoc) {\n    var subject = containerDoc.getSubject(inbox);\n    var containerURLS = subject.getAllRefs(ldp.contains);\n\n    var result = [];\n    for (var i = 0; i < containerURLS.length; i++) {\n      try {\n        //FETCH DE LA NOTIFICACIÓN\n        var doc = await fetchDocument(containerURLS[i]);\n\n        if (doc) {\n          //Notification url\n          const url = containerURLS[i];\n\n          var subject = doc.getSubject(url);\n\n          //From here get typeNotification && author && path\n          const summary = subject.getString(ns.as(\"summary\"));\n\n          //Processing the summary information\n\n          let notification = await processNotificationInfo(\n            url,\n            summary,\n            webIdAuthor\n          );\n          result.push(notification);\n          deleteNotification(notification.urlNotification);\n        }\n      } catch (e) {\n        console.log(\"Error\");\n      }\n    }\n    cache.setNotifications(result);\n\n    // localStorage.setItem(\"notifications\", JSON.stringify(result));\n    return result;\n  }\n  return [];\n}\n\n//ROUTE_https://clrmrnd/inrupt.net/_https://clrmrnd.inrupt.net/viade/routes/Rusia.json_Sat Apr 25 2020 17:11:07 GMT+0200 (hora de verano de Europa central)\nasync function processNotificationInfo(url, summary, webIdAuthor) {\n  let notification = new Notification();\n\n  try {\n    let info = summary.split(\"_\");\n\n    let type = info[0];\n    switch (type) {\n      case \"ROUTE\":\n        //author\n        let webId = info[1];\n        const profile = webId + \"profile/card#me\";\n        const webIdForName = await GetSpecificWebId(webId);\n        const authorName = await GetSpecificName(profile);\n\n        //path\n        const routePath = info[2];\n        //date\n        const date = info[3];\n\n        notification = new Notification(\n          url,\n          type,\n          routePath,\n          authorName,\n          webIdForName,\n          date\n        );\n\n        //Crea o modifica el archivo de sharedRoutes añadiendo la url\n        addToSharedFolder(notification, webIdAuthor);\n        return notification;\n\n      case \"COMMENT\":\n        break;\n\n      default:\n        console.log(\"NOTIFICATION NOT FROM THIS APP: VIADE_EN2B\");\n        break;\n    }\n\n    return notification;\n  } catch (Error) {\n    console.log(\n      \"The notification could not be processed, it may be possible that is not a notification from this app.\"\n    );\n    return false;\n  }\n}\n\nasync function addToSharedFolder(notification, myWebId) {\n  let path = myWebId + \"/viade/shared/\" + notification.authorWebId + \".jsonld\";\n  try {\n    //checking if the path exists\n    let exists = await fc\n      .itemExists(path)\n      .catch(Error)\n      .then(console.log(\"ERROR\"));\n\n    if (!exists) {\n      createFileShared(path, notification);\n    } else {\n      addRouteToFile(path, notification);\n    }\n  } catch (Error) {\n    console.log(\"Error: not found\");\n  }\n}\n\nasync function addRouteToFile(path, notification) {\n  //push id\n  const file = await fc.readFile(path);\n  let routeJson = JSON.parse(file);\n  routeJson.routes.push({ \"@id\": notification.urlResource });\n  //store\n  fc.createFile(path, JSON.stringify(routeJson), \"text/jsonld\");\n}\n\nfunction createFileShared(path, notification) {\n  //saveSharedFile\n  const content = functionCreateSharedFileContent(notification);\n  fc.createFile(path, content, \"text/jsonld\");\n}\n\nfunction functionCreateSharedFileContent(notification) {\n  return JSON.stringify({\n    \"@context\": {\n      \"@version\": 1.1,\n      routes: {\n        \"@container\": \"@list\",\n        \"@id\": \"viade:routes\",\n      },\n      viade: \"http://arquisoft.github.io/viadeSpec/\",\n    },\n    routes: [\n      {\n        \"@id\": notification.urlResource,\n      },\n    ],\n  });\n}\n\n/**\n * Returns the current list of notifications.\n * Ex: \"https://testingclrmrnd.inrupt.net/viade/inbox/\"\n */\nexport async function getNotificationURLS(inboxPath) {\n  var inbox = inboxPath;\n  var containerDoc = await fetchDocument(inbox);\n  var result = [];\n\n  //if the document exists\n  if (containerDoc) {\n    var subject = containerDoc.getSubject(inbox);\n\n    var containerURLS = subject.getAllRefs(ldp.contains);\n    for (var i = 0; i < containerURLS.length; i++) {\n      try {\n        //LISTANDO LAS URLS DE LAS NOTIFICACIONES\n        result.push(containerURLS[i]);\n      } catch (e) {\n        console.log(\"Error\");\n      }\n    }\n    return result;\n  }\n  return [];\n}\n\n/**\n * Method that allows to send a notification to a\n * friend.\n * @param {} webIdFriend\n * @param {*} content\n */\nexport async function postNotification(webIdFriend, content, uuid) {\n  var inbox = \"\";\n  const lastElement = webIdFriend[webIdFriend.length - 1];\n  if (lastElement === \"/\") {\n    inbox = webIdFriend + \"viade/inbox/\";\n  } else {\n    inbox = webIdFriend + \"/viade/inbox/\";\n  }\n\n  await request(\n    {\n      method: \"POST\",\n      uri: inbox,\n      body: content,\n      headers: {\n        slug: uuid,\n        \"Content-Type\": \"text/turtle\",\n      },\n    },\n    function (error, response, content) {\n      if (error) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  );\n}\n\nexport function createNotificationContent(\n  type,\n  title,\n  webId,\n  routePath,\n  time,\n  uuid\n) {\n  return `@prefix terms: <http://purl.org/dc/terms#>.\n          @prefix as: <https://www.w3.org/ns/activitystreams#> .\n          @prefix schema: <http://schema.org/> .\n          @prefix solid: <http://www.w3.org/ns/solid/terms#> .\n          @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n          @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n          @prefix : <${webId + `viade/inbox/` + uuid + `.ttl`}>.\n          <${webId + `viade/inbox/` + uuid + `.ttl`}> a as:${type} ;\n          schema:license <https://creativecommons.org/licenses/by-sa/4.0/>;\n          terms:title \"${title}\" ;\n          as:summary \"${routePath}\" ;         \n          as:actor <${webId}> ;\n          solid:read \"false\"^^xsd:boolean ;\n          as:published \"${time}\"^^xsd:dateTime .`;\n}\n\nexport function createNotificationSummary(\n  webIdAuthor,\n  routePath,\n  webIdTo,\n  date\n) {\n  return \"ROUTE\" + \"_\" + webIdAuthor + \"_\" + routePath + \"_\" + date;\n}\n\nexport function createNotificationSummaryJSON(\n  webIdAuthor,\n  routePath,\n  webIdTo,\n  date\n) {\n  return JSON.stringify({\n    \"@context\": \"https://www.w3.org/ns/activitystreams\",\n    summary: \"ROUTE\",\n    type: \"RouteType\",\n\n    actor: {\n      type: \"Person\",\n      name: webIdAuthor,\n    },\n\n    object: {\n      type: \"Resource\",\n      name: routePath,\n    },\n\n    target: {\n      type: \"Person\",\n      name: webIdTo,\n    },\n\n    published: {\n      type: \"Date\",\n      name: date,\n    },\n  });\n}\n\nexport async function deleteNotification(url) {\n  if (url != null) {\n    if (await fc.itemExists(url)) {\n      try {\n        fc.delete(url);\n      } catch (error) {\n        alert(error);\n      }\n    }\n    console.log(\"You are trying to delete something that is null\");\n  }\n}\n","import React from \"react\";\nimport \"assets/css/NotificationsPage.css\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport { getNotificationDocuments } from \"NotificationManager/NotificationManager\";\nclass NotificationsPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true, //now, in the future will be false\n      routes: \"\",\n      notifications: [],\n    };\n  }\n\n  componentDidMount() {\n    var session = JSON.parse(localStorage.getItem(\"session\"));\n\n    var webIdAuthor = session.webId.substring(0, session.webId.length - 16);\n    var inbox = webIdAuthor + \"/viade/inbox/\";\n\n    getNotificationDocuments(inbox, webIdAuthor).then((notifications) => {\n      this.setState({ loading: false, notifications: notifications });\n    });\n  }\n\n  viewLoaded = (notifications) => {\n    /* function search(){\n        var value = document.getElementById(\"myInput\").value;\n        routes = routes.filter(item=>\n          item.name.search(value)<0\n        );\n      }\n    */\n\n    return (\n      <div className=\"bodyRoutes\" id=\"outer-container\">\n        <main>\n          <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n          <div className=\"App comments\" id=\"page-wrap\">\n            <header className=\"bodyHeader\"></header>\n            <section className=\"sectionComments\">\n              <ul className=\"listComment\">\n                {notifications.map((item, index) => {\n                  return (\n                    <li\n                      id={\"comment\" + index}\n                      key={index}\n                      className=\"liComment\"\n                    >\n                      <div className=\"sectionComment\">\n                        <div className=\"commentInfo\">\n                          <p className=\"header\">\n                            <i className=\"fa fas fa-bell\"></i>\n                            {item.authorName}\n                          </p>\n                          <p className=\"description\">{item.message}</p>\n                        </div>\n                        <div className=\"delete\">\n                          <span>\n                            <i className=\"fa fas fa-trash\"></i>\n                          </span>\n                        </div>\n                      </div>\n                    </li>\n                  );\n                })}\n              </ul>\n            </section>\n          </div>\n        </main>\n      </div>\n    );\n  };\n  viewCharge = () => {\n    return (\n      <div className=\"bodyComments\" id=\"outer-container\">\n        <CustomLoader />\n      </div>\n    );\n  };\n  render() {\n    const { loading } = this.state;\n\n    return (\n      <React.Fragment>\n        {loading ? <CustomLoader /> : this.viewLoaded(this.state.notifications)}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default NotificationsPage;\n","import GeoCoordinate from \"../../Entities/GeoCoordinate\";\nimport BasicRoute from \"../../Entities/BasicRoute\";\nimport * as CreateRoute from \"../../RouteManager/CreateRoute\";\nimport GPX from \"viade-gpx-parse\";\nimport { parseGpx } from \"viade-gpx-parse\";\nimport { tracks } from \"rdf-namespaces/dist/schema\";\n\nexport default {\n  parseFile(file) {\n    read(file);\n  },\n};\n\nfunction parseToJsonldAndUpload(route) {\n  try {\n    CreateRoute.default.createNormalBasic(route);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction read(file) {\n  file.forEach((file) => {\n    let reader = new FileReader();\n\n    reader.onload = () => {\n      let routeString = reader.result;\n      try {\n        let imported = true;\n        parseGpxToRoute(routeString, function (routes) {\n          routes.forEach((route) => {\n            imported = parseToJsonldAndUpload(route) && imported;\n          });\n          if (imported && routes.length > 0) {\n          } else {\n          }\n        });\n      } catch (error) {\n        console.log(\"error: \" + error);\n      }\n    };\n    reader.readAsText(file);\n  });\n}\n\nfunction parseGpxToRoute(string, callback) {\n  parseGpx(string, function (error, gpxData) {\n    let routes = [];\n    let geoCoordinates = [];\n    let tracks = gpxData.tracks;\n\n    tracks.forEach((track) => {\n      let route = parseRoute(track);\n      routes.push(route);\n    });\n\n    return callback(routes);\n  });\n}\n\nfunction parseRoute(track) {\n  let points = getPoints(track);\n  let route = new BasicRoute(track.name, points);\n  return route;\n}\n\nfunction getPoints(track) {\n  let points = [];\n  track.segments.forEach((segment) => {\n    segment.forEach((trackPoint) => {\n      points.push(new GeoCoordinate(trackPoint.lat, trackPoint.lon));\n    });\n  });\n  return points;\n}\n","import React, { useState, useReducer } from \"react\";\n\nimport GenericButton from \"../generic_components/GenericButton\";\nimport FloatingButton from \"../generic_components/FloatingButton\";\nimport BurgerMenu from \"components/generic_components/BurgerMenu\";\nimport \"assets/css/GenericButton.css\";\n\nimport { HashRouter as Router, Link } from \"react-router-dom\";\n\nimport Dropzone from \"../spec_components/Dropzone\";\n\nimport '../../assets/css/ImportGpxPage.css';\nimport '../../assets/css/DropzonePage.css';\nimport { ToastContainer, toast, Zoom, Bounce } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport cache from \"caches/fileCache/FileCache\";\nimport * as GPXparser from \"../../data-access/FileManager/GPXparser\";\n\nclass ImportGpxPage extends React.Component {\n  render() {\n    function toDo(params) { //EJEMPLO DE FUNCIÓN PARA PASARLE AL onUpload\n      //cache.uploadFiles([...params]); \n      GPXparser.default.parseFile(params);\n      \n\n    }\n    function emptyTrigger(){\n      //Function To Trigger\n    }\n    return (\n      <div className=\"bodyGpx\">\n       <BurgerMenu pageWrapId=\"page-wrap\" container=\"gpxPage\"/>\n         <div className=\"App gpx\" id=\"page-wrap\">\n          <div ref={node => this.node = node } className=\"gpxCard\">\n          \n            <div className=\"GpxZone\">\n              <Dropzone hideUpload={() => {}} onUpload={toDo} onFilesAdded={emptyTrigger} /> \n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ImportGpxPage;\n","import SolidFileClient from \"solid-file-client\";\nimport * as cache from \"caches/friendGroupCache/FriendGroupCache\";\nimport {\n  createContentAclMedia\n} from \"data-access/FileManager/AclCreator\";\n\nconst auth = require(\"solid-auth-client\");\nconst fileClient = new SolidFileClient(auth, { enableLogging: true });\n\nvar groups_path = \"viade/groups\";\nexport default {\n  friends: [],\n  empty() {},\n  addToNewGroup(friend) {\n    this.friends.push(friend);\n  },\n\n  addtogroup(groupId, webId) {},\n\n  async creategroup(users, groupname) {\n    let session = await auth.currentSession();\n    let new_id = this.create_UUID();\n\n    let namefile = groupname + new_id + \".jsonld\";\n    let group_folder =\n      session.webId.substring(0, session.webId.length - 16) +\n      \"/viade/groups/\" +\n      namefile;\n\n    var group = JSON.stringify(this.group_template(groupname, users, new_id));\n    var file = new File([group], namefile, {\n      type: \"application/ld+json\",\n    });\n\n    this.updateFile(group_folder, file, file.type);\n    createContentAclMedia(group_folder, namefile);\n    /* var updateGroups = cache.default.getGroups(this.empty());\n    updateGroups.push(JSON.parse(group));\n    cache.default.setGroups(updateGroups);*/\n  },\n\n  async updateFile(path, content, contentType) {\n    return fileClient.putFile(path, content, contentType).catch(console.log);\n  },\n\n  async checkexistance(id, group_folder) {\n    if (await fileClient.itemExists(group_folder)) {\n      try {\n        let content = await fileClient.readFolder(group_folder);\n\n        let files = content.files;\n\n        for (let i = 0; i < files.length; i++) {\n          if (files[i].url.includes(id)) return true;\n        }\n      } catch (error) {\n        //toast\n      }\n    } else {\n      return false;\n    }\n  },\n\n  group_template(groupname, users, new_id) {\n    var template = {\n      \"@context\": {\n        \"@version\": 1.1,\n        users: {\n          \"@container\": \"@list\",\n          \"@id\": \"schema:Person\",\n        },\n        name: {\n          \"@id\": \"schema:name\",\n          \"@type\": \"xs:string\",\n        },\n        url: {\n          \"@id\": \"schema:url\",\n          \"@type\": \"xs:string\",\n        },\n        identifier: {\n          \"@id\": \"schema:identifier\",\n          \"@type\": \"PropertyValue\",\n          propertyID: \"Viade Friend Group\",\n          value: new_id,\n        },\n        schema: \"http://schema.org/\",\n        xsd: \"http://www.w3.org/2001/XMLSchema#\",\n      },\n      identifier: new_id,\n      name: groupname,\n      users: users,\n    };\n\n    return template;\n  },\n\n  create_UUID() {\n    var dt = new Date().getTime();\n    var uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\n      /[xy]/g,\n      function (c) {\n        var r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n      }\n    );\n    return uuid;\n  },\n};\n","import cache from \"caches/friendGroupCache/FriendGroupCache\";\nimport {\n  createContentAclMedia\n} from \"data-access/FileManager/AclCreator\";\n\nexport default {\n  async getUserGroupFriends(callback) {\n    const auth = require(\"solid-auth-client\");\n    const FC = require(\"solid-file-client\");\n    const fc = new FC(auth);\n    let groups = [];\n    let session = await auth.currentSession();\n    //let popupUri = 'https://solid.community/common/popup.html';\n    if (!session || session.webId === undefined || session.webId === null) {\n      callback();\n      return undefined;\n    }\n    //alert('Logged in as ' + session.webId);\n    let group_folder =\n      session.webId.substring(0, session.webId.length - 16) + \"/viade/groups/\"; //\"/public/groups/\";\n\n    if (\n      await fc\n        .itemExists(group_folder)\n        .then()\n        .catch((error) => {\n          console.log(\"There was a problem reading the folder \" + group_folder);\n          return false;\n        })\n    ) {\n      try {\n        //check acl and if not add it\n        \n        let content = await fc.readFolder(group_folder);\n        let files = content.files;\n\n        for (let i = 0; i < files.length; i++) {\n          const ur = files[i].url;\n          const name = ur.split(\"/\");\n          const finalName = name[name.length - 1 ];\n          checkAclOrCreateMedia(files[i].url, finalName);\n          let fileContent = await fc.readFile(files[i].url);\n          groups.push(fileContent);\n        }\n      } catch (error) {\n        console.log(\"The folder couldn't be read\");\n        console.log(error); // A full error response\n        console.log(error.status); // Just the status code of the error\n        console.log(error.message); // Just the status code and statusText\n      }\n    } else {\n      //error\n    }\n\n    let rou = this.jsonify(groups);\n    //localStorage.setItem('rutas', JSON.stringify(rou));\n\n    cache.setGroups(rou);\n  },\n  jsonify(groups) {\n    var groupsfinal = [];\n    groupsfinal = groups.map((group) => JSON.parse(group));\n    console.log(groups);\n    return groupsfinal;\n  },\n};\n\nfunction checkAclOrCreateMedia(url, mediaName) {\n  const auth = require(\"solid-auth-client\");\n  const FC = require(\"solid-file-client\");\n  const fc = new FC(auth);\n\n  if (\n    !fc\n      .itemExists(url)\n      .then()\n      .catch((error) => {\n        return;\n      })\n  ) {\n    createContentAclMedia(url, mediaName);\n  }\n}","import creator from \"./CreateFriendGroup\";\nimport loader from \"./GetFriendGroup\";\nimport cache from \"caches/friendGroupCache/FriendGroupCache\";\nexport default {\n  creategroup(users, groupname) {\n    creator.creategroup(users, groupname);\n  },\n  async load(callback) {\n    return loader.getUserGroupFriends(callback);\n  },\n};\n","import { GetUserFriends } from \"../../data-access/UserData\";\nimport friendmanager from \"FriendGroupManager/FriendGroupManager\";\nexport default {\n  groups: [],\n  groupSelected: \"\",\n  setGroups(groups_param) {\n    this.groups = groups_param;\n  },\n  async getGroups(handleSession) {\n    if (this.groups.length > 0) return this.groups;\n    else {\n      await friendmanager.load(handleSession);\n      return this.groups;\n    }\n  },\n  clear() {\n    this.groups = [];\n  },\n  setGroupSelected(group) {\n    this.groupSelected = group;\n  },\n  async getGroupSelected(handleSession) {\n    return this.groupSelected;\n  },\n};\n","import React from \"react\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport CardLayout from \"../generic_components/Card\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\nimport * as cache from \"caches/friendGroupCache/FriendGroupCache\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport \"../../assets/css/FriendListCache.css\";\n\nclass FriendGroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      groups: [],\n    };\n  }\n\n  componentDidMount() {\n    cache.default.getGroups(this.handleSession).then((groups) => {\n      this.setState({ loading: false, groups: groups });\n      cache.default.setGroups(groups);\n    });\n  }\n\n  async selectDetails(e, group) {\n    var group_final = [];\n    group.users.map((item, index) => {\n      var friend = { name: \"\", url: \"\", photo: \"\" };\n      friend.url = item.url;\n\n      group_final.push(friend);\n    });\n\n    cache.default.setGroupSelected(group_final);\n  }\n\n  handleSession = () => {\n    this.props.history.push(\"/login\");\n  };\n\n  viewLoaded = (groups) => {\n    return (\n      <div className=\"bodyFriends\" id=\"outer-container\">\n        <main>\n          <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n          <div className=\"App friends\" id=\"page-wrap\">\n            <div className=\"backList\">\n              <Router>\n                <Link to=\"/creategroup\">Create Group</Link>\n              </Router>\n            </div>\n            <section className=\"sectionFriends\">\n              <h1>List of Groups</h1>\n              <ul className=\"listgroups\">\n                {groups.map((item, index) => {\n                  return (\n                    <li id={\"group\" + index} key={index} className=\"liCard\">\n                      <CardLayout\n                        header={item.name}\n                        image=\"https://www.pngitem.com/pimgs/m/4-49786_people-people-icon-png-file-transparent-png.png\"\n                        link=\"/groupdetails\"\n                        className=\"linkRoute\"\n                        action={(e) => {\n                          this.selectDetails(e, groups[index]);\n                        }}\n                        iconName=\"users\"\n                        popupContent=\"View group members\"\n                      />\n                    </li>\n                  );\n                })}\n              </ul>\n            </section>\n          </div>\n        </main>\n      </div>\n    );\n  };\n  render() {\n    const { loading } = this.state;\n    return (\n      <React.Fragment>\n        {loading ? <CustomLoader /> : this.viewLoaded(this.state.groups)}\n      </React.Fragment>\n    );\n  }\n}\nexport default FriendGroupsPage;\n/*\n<Router>\n                        <Link\n                          className=\"buttonGroup\"\n                          onClick={(e) => {\n                            this.selectDetails(e, groups[index]);\n                          }}\n                          to=\"/groupdetails\"\n                        >\n                          {item.name}\n                        </Link>\n                      </Router>\n*/\n","import React from \"react\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport CardLayout from \"../generic_components/Card\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\nimport * as cache from \"caches/friendGroupCache/FriendGroupCache\";\nimport * as friendcache from \"caches/friendCache/FriendCache\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport \"../../assets/css/FriendListCache.css\";\nvar friends = [];\nclass FriendGroupsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      group: { users: [{ name: \"\", url: \"\" }] },\n      friends: [],\n    };\n  }\n\n  componentDidMount() {\n    friends = friendcache.default.getFriends();\n\n    cache.default.getGroupSelected(this.handleSession).then((group) => {\n      this.setState({ loading: false, group: group });\n    });\n  }\n\n  handleSession = () => {\n    this.props.history.push(\"/login\");\n  };\n\n  viewLoaded = (group) => {\n    return (\n      <div className=\"bodyFriends\" id=\"outer-container\">\n        <main>\n          <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n\n          <div className=\"App friends\" id=\"page-wrap\">\n            <div className=\"backList\">\n              <Router>\n                <Link to=\"/groups\">List Groups</Link>\n              </Router>\n            </div>\n            <section className=\"sectionFriends\">\n              <h1>List of Members of Group:</h1>\n              <ul className=\"listgroups\">\n                {friends.map((item, index) => {\n                  if (group.some((i) => i.url === item.webIdString)) {\n                    return (\n                      <li id={\"group\" + index} key={index} className=\"liCard\">\n                        <CardLayout\n                          image={item.profilePicture}\n                          header={item.name}\n                          description={item.webIdString}\n                          externalLink={item.webIdString}\n                          externalIconName=\"user\"\n                          externalPopupContent=\"Go to profile\"\n                        />\n                      </li>\n                    );\n                  }\n                })}\n              </ul>\n            </section>\n          </div>\n        </main>\n      </div>\n    );\n  };\n  render() {\n    const { loading } = this.state;\n    return (\n      <React.Fragment>\n        {loading ? <CustomLoader /> : this.viewLoaded(this.state.group)}\n      </React.Fragment>\n    );\n  }\n}\nexport default FriendGroupsPage;\n","import React, { Component } from \"react\";\nimport \"../../assets/css/GenericButton.css\";\n\nclass CustomButtomList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: false,\n    };\n  }\n  executeAction() {\n    var method = this.props.onClick;\n    method();\n  }\n  render() {\n    const { selected } = this.state;\n    return (\n      <React.Fragment>\n        <button\n          className={this.props.className}\n          name={this.props.name}\n          onClick={() => {\n            this.executeAction();\n            this.setState({ selected: !this.state.selected });\n          }}\n        >\n          {this.props.message}\n        </button>\n        {selected ? (\n          <span\n            className=\"spanselected fas fa fa-check\"\n            aria-hidden=\"true\"\n          ></span>\n        ) : (\n          <span className=\"spanselected fa fa-times\" aria-hidden=\"true\">\n            {\" \"}\n          </span>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default CustomButtomList;\n","import React from \"react\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport CardLayout from \"../generic_components/Card\";\nimport CustomLoader from \"components/generic_components/CustomLoader\";\nimport CustomListButton from \"components/generic_components/CustomListButton\";\nimport GenericButton from \"components/generic_components/GenericButton\";\nimport * as cache from \"caches/friendGroupCache/FriendGroupCache\";\nimport * as friendcache from \"caches/friendCache/FriendCache\";\nimport friendmanager from \"FriendGroupManager/FriendGroupManager\";\nimport { HashRouter as Router, Link } from \"react-router-dom\";\nimport \"../../assets/css/CreateFriendGroupPage.css\";\nimport data from \"@solid/query-ldflex\";\n\nimport { Image, List } from \"semantic-ui-react\";\nvar friends = [];\nvar friendsToGroup = [];\nclass CreateFriendGroupPage extends React.Component {\n  constructor(props) {\n    super(props);\n    friends = friendcache.default.getFriends();\n    this.state = {\n      loading: false,\n      friends: [],\n      nameGroup: \"\",\n    };\n  }\n\n  componentDidMount() {\n    //this.setState({ loading: true, friends: friendcache.default.getFriends() });\n  }\n  manageFriendsToGroup(friendWebId) {\n    var length = friendsToGroup.length;\n    friendsToGroup = friendsToGroup.filter((item) => item.url !== friendWebId);\n    if (friendsToGroup.length == length)\n      friendsToGroup.push({ url: friendWebId });\n  }\n  getFriendsToGroup() {\n    return friendsToGroup;\n  }\n\n  nameToGroup(name) {\n    this.setState({ nameGroup: name.target.value });\n  }\n\n  viewLoaded = (friends) => {\n    return (\n      <div className=\"bodyFriends\" id=\"outer-container\">\n        <main>\n          <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n\n          <div className=\"App friends\" id=\"page-wrap\">\n            <div className=\"backList\">\n              <Router>\n                <Link to=\"/groups\">List Groups</Link>\n              </Router>\n            </div>\n            <section className=\"sectionFriends\">\n              <h1 className=\"headerGroup\">Create a Group of Friends</h1>\n              <div className=\"createGroup\">\n                <section className=\"selectMembersSection\">\n                  <label>Select Members</label>\n                  <ul className=\"listgroups\">\n                    {friends.map((item, index) => {\n                      return (\n                        <li id={\"group\" + index} key={index} className=\"liCard\">\n                          <div className=\"itemgroup\">\n                            <CustomListButton\n                              className=\"itemelement\"\n                              message={item.name}\n                              onClick={() => {\n                                this.manageFriendsToGroup(\n                                  friends[index].webIdString\n                                );\n                              }}\n                            />\n                          </div>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </section>\n                <section className=\"saveSection\">\n                  <label htmlFor=\"textInput\">Group Name</label>\n                  <br />\n                  <input\n                    className=\"textInput\"\n                    type=\"text\"\n                    onChange={this.nameToGroup.bind(this)}\n                  />\n                  <form>\n                    <GenericButton\n                      className=\"submitGroup\"\n                      message=\"Save Group\"\n                      onClick={() => {\n                        friendmanager.creategroup(\n                          this.getFriendsToGroup(),\n                          this.state.nameGroup\n                        );\n                        window.location.reload();\n                      }}\n                    />\n                  </form>\n                </section>\n              </div>\n            </section>\n          </div>\n        </main>\n      </div>\n    );\n  };\n  render() {\n    return <React.Fragment>{this.viewLoaded(friends)}</React.Fragment>;\n  }\n}\nexport default CreateFriendGroupPage;\n","const SolidAclUtils = require(\"solid-acl-utils\");\nconst auth = require(\"solid-auth-client\");\n\nconst { AclApi, Permissions, Agents } = SolidAclUtils;\nconst { READ, WRITE, APPEND, CONTROL } = Permissions;\n\n//Acl creation\n\n/**\n * Method that sets a permission for an\n * specific url for a specific user\n * @param {*} permission, string as \"READ\", \"WRITE\", \"APPEND\", \"CONTROL\" that represent the permission\n * @param {*} urlToShare url of the resource to be shared.\n * @param {*} webIdFriend id of the person to share the resource with.\n */\nexport async function setPermissionsTo(\n  permission,\n  urlToShare,\n  webIdFriend,\n  webIdAuthor\n) {\n  const mode = getMode(permission);\n\n  const fetch = auth.fetch.bind(auth);\n  const utils = new AclApi(fetch, { autoSave: true });\n\n  try {\n    const acl = await utils.loadFromFileUrl(urlToShare);\n\n    //Setting permissions\n    let permissions = new Permissions();\n    permissions.add(mode);\n\n    //Setting person to grant access to.\n    let agents = new Agents();\n    agents.addWebId(webIdFriend);\n\n    try {\n      await acl.addRule(permissions, agents);\n    } catch (er) {\n      console.error(\"The permission could not be added\");\n      console.error(er);\n      //throw er\n    }\n  } catch (Error) {\n    console.log(\"The acl of the route was not yet created\");\n    console.log(Error);\n    //throw Error;\n  }\n}\n\n/**\n * Method that deletes a permission for an\n * specific url for a specific user\n * @param {*} permission, string as \"READ\", \"WRITE\", \"APPEND\", \"CONTROL\" that represent the permission to be deleted\n * @param {*} urlToShare url of the resource that was shared.\n * @param {*} webIdFriend id of the person that the resource was shared with.\n */\nexport async function deletePermissions(permission, urlToShare, webIdFriend) {\n  const mode = getMode(permission);\n\n  const fetch = auth.fetch.bind(auth);\n  const utils = new AclApi(fetch, { autoSave: true });\n  const acl = await utils.loadFromFileUrl(urlToShare);\n\n  // Revoke permissions\n  await acl.deleteRule(mode, webIdFriend);\n}\n\n/**\n * Checks whether a user has a permission over an specific\n * file or not.\n * @param {*} permission\n * @param {*} webId\n * @param {*} filePath\n */\nexport async function checkPermissions(permission, webId, filePath) {\n  const fetch = auth.fetch.bind(auth);\n  const utils = new AclApi(fetch, { autoSave: true });\n\n  const acl = await utils.loadFromFileUrl(filePath);\n\n  let mode = getMode(permission);\n  const permissions = acl.getPermissionsFor(webId);\n  const value = permissions.permissions;\n  return value.has(mode);\n}\n\n/**\n * Auxiliar method that given a string representing\n * the permission, returns the specific permission.\n *\n * @param {} permission\n */\nexport function getMode(permission) {\n  switch (permission) {\n    case \"READ\":\n      return READ;\n\n    case \"WRITE\":\n      return WRITE;\n\n    case \"APPEND\":\n      return APPEND;\n\n    case \"CONTROL\":\n      return CONTROL;\n    default:\n      return \"The format is wrong\";\n  }\n}\n","import { setPermissionsTo, checkPermissions } from \"util/PermissionManager\";\nimport {\n  createNotificationSummary,\n  postNotification,\n  createNotificationContent,\n} from \"NotificationManager/NotificationManager\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { loadSpecificUserRoutesFiles } from \"RouteManager/ListSpecificUserRoutes\";\nimport {\n  createContentAcl,\n  createContentAclMedia,\n} from \"data-access/FileManager/AclCreator\";\n/**\n * Function that allows a user to share a route with a friend.\n * Provides READ permissions to the friend over the route of the user autenticated,\n * and sends a notification to the inbox of the friend, containing the url of that\n * route.\n *\n * Example: ShareWith( \"https://clrmrnd.inrupt.net/viade/routes/Rusia.json\", \"https://testingclrmrnd.inrupt.net/profile/card#me\", \"https://clrmrnd.inrupt.net/profile/card#me\")\n *\n * @param {String} route path to the route the user wants to share.\n * @param {String} profileFriend represents profile card of the friend.\n * @param {String} profileAuthor represents the profile card of the user autenticated.\n */\nexport async function ShareWith(route, profileFriend, profileAuthor) {\n  //Sharing the route with the friend (it must be the profile of the friend).\n\n  let webIdAuthor = profileAuthor.substring(0, profileAuthor.length - 16);\n  webIdAuthor = webIdAuthor + \"/\";\n\n  let webIdFriend = profileFriend.substring(0, profileFriend.length - 16);\n  webIdFriend = webIdFriend + \"/\";\n\n  const routeAtt = route.split(\"/\");\n  const routeName = routeAtt[routeAtt.length - 1];\n\n  //send notification to other user inbox\n  const summary = createNotificationSummary(\n    webIdAuthor,\n    route,\n    webIdFriend,\n    new Date()\n  );\n  const uuid = uuidv4();\n\n  const contenido = createNotificationContent(\n    \"Announce\",\n    \"ROUTE\",\n    webIdFriend,\n    summary.toString(),\n    new Date(),\n    uuid\n  );\n\n  //creating an acl if necessary;\n  checkAclOrCreate(route, routeName);\n\n  //check if it's already shared (you have to check and set permissions to the /profile/card#me)\n  const shared = await checkPermissions(\"READ\", profileFriend, route);\n  if (!shared) {\n    //set permissions to read in the route\n    setPermissionsTo(\"READ\", route, profileFriend);\n\n    //retrieving media of the route\n    const routeEntity = await loadSpecificUserRoutesFiles(route);\n\n    if (routeEntity !== null && routeEntity !== undefined) {\n      if (routeEntity.files !== null && routeEntity.files !== undefined) {\n        if (\n          routeEntity.files[0] !== null &&\n          routeEntity.files[0] !== undefined\n        ) {\n          let media = routeEntity.files[0].files;\n\n          if (media != undefined && media != null) {\n            for (let i = 0; i < media.length; i++) {\n              const element = media[i].filePath;\n              //checking if it has acl\n              let nameResource = element.split(\"/\");\n              let name = nameResource[nameResource.length - 1];\n\n              checkAclOrCreateMedia(element, name);\n              setPermissionsTo(\"READ\", element, profileFriend);\n            }\n          }\n        }\n      }\n    }\n\n    //send notification to other user inbox\n    const summary = createNotificationSummary(\n      webIdAuthor,\n      route,\n      webIdFriend,\n      new Date()\n    );\n    const uuid = uuidv4();\n\n    const contenido = createNotificationContent(\n      \"Announce\",\n      \"ROUTE\",\n      webIdFriend,\n      summary.toString(),\n      new Date(),\n      uuid\n    );\n\n    try {\n      postNotification(webIdFriend, contenido, uuid)\n        .then()\n        .catch((error) =>\n          console.log(\n            \"It seems that the other user has not an inbox with the proper specifications\"\n          )\n        );\n\n      return true;\n    } catch (e) {\n      console.log(\"There was an error\");\n      return false;\n    }\n  } else {\n    console.log(\"The route was already shared.\");\n    return false;\n  }\n}\n\nfunction checkAclOrCreate(url, routeName) {\n  const auth = require(\"solid-auth-client\");\n  const FC = require(\"solid-file-client\");\n  const fc = new FC(auth);\n\n  if (\n    !fc\n      .itemExists(url)\n      .then()\n      .catch((error) => {\n        return;\n      })\n  ) {\n    createContentAcl(url, routeName);\n  }\n}\n\nfunction checkAclOrCreateMedia(url, mediaName) {\n  const auth = require(\"solid-auth-client\");\n  const FC = require(\"solid-file-client\");\n  const fc = new FC(auth);\n\n  if (\n    !fc\n      .itemExists(url)\n      .then()\n      .catch((error) => {\n        return;\n      })\n  ) {\n    createContentAclMedia(url, mediaName);\n  }\n}\n","import React from \"react\";\nimport BurgerMenu from \"../generic_components/BurgerMenu\";\nimport CardLayout from \"../generic_components/Card\";\nimport * as cache from \"caches/friendCache/FriendCache\";\nimport * as routecache from \"caches/routeCache/RouteCache\";\nimport { ShareWith } from \"ShareManager/ShareRoute\";\nimport { toast } from \"react-toastify\";\nimport \"../../assets/css/FriendList.css\";\n\nvar friends = [];\nconst auth = require(\"solid-auth-client\");\nvar session = \"\";\n\nconst ShareRoutePage = () => {\n  friends = cache.default.getFriends();\n  session = JSON.parse(localStorage.getItem(\"session\"));\n  return (\n    <div className=\"bodyFriends\" id=\"outer-container\">\n      <main>\n        <BurgerMenu pageWrapId=\"page-wrap\" container=\"outer-container\" />\n        <div className=\"App friends\" id=\"page-wrap\">\n          <section className=\"sectionFriends\">\n            <ul className=\"friendContainer\">\n              {friends.map((item, index) => {\n                return (\n                  <li id={\"friend\" + index} key={index} className=\"liCard\">\n                    <CardLayout\n                      image={item.profilePicture}\n                      header={item.name}\n                      description={item.webIdString}\n                      numberOfFriends={item.numberOfFriends}\n                      shareIconName=\"share\"\n                      shareAction={(e) => {\n                        e.preventDefault();\n                        toast.info(\n                         \"Route successfully shared with \" + item.name,\n                         {\n                           draggable: true,\n                           position: toast.POSITION.TOP_CENTER,\n                         }\n                       );\n                        ShareWith(\n                          routecache.default.getSelectedToShare(),\n                          item.webIdString,\n                          session.webId\n                        );\n                      }}\n                    />\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default ShareRoutePage;\n","import React, { Component, Fragment } from \"react\";\n\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\n\nimport RefreshRoute from \"./components/spec_components/RefreshRoute\";\n\nimport MainPage from \"./components/pages/MainPage\";\nimport LoginPage from \"./components/pages/LoginPage\";\nimport FriendsPage from \"./components/pages/FriendList\";\nimport DropzonePage from \"./components/pages/DropzonePage\";\nimport RoutesPage from \"./components/pages/RoutesPage\";\nimport AboutPage from \"./components/pages/AboutPage\";\nimport NotificationsPage from \"./components/pages/NotificationsPage\";\nimport SaveRoutePage from \"./components/pages/SaveRoutePage\";\nimport ImportGpxPage from \"./components/pages/ImportGpxPage\";\nimport FriendGroupsPage from \"./components/pages/FriendGroupsPage\";\nimport SeeFriendsOfGroupPage from \"./components/pages/SeeFriendsOfGroupPage\";\nimport CreateFriendGroupPage from \"./components/pages/CreateFriendGroupPage\";\nimport ShareRoutePage from \"./components/pages/ShareRoutePage\";\nimport { ToastContainer, toast, Bounce } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Provider } from \"react-redux\";\n//import axios from \"axios\";\nimport * as cache from \"caches/routeCache/RouteCache\";\n\nimport \"./App.css\";\n\nvar lastRouteReceived = [];\n/*function notificationsRecieved() {\n  if (cache.default.getSelected() != lastRouteReceived) {\n    lastRouteReceived = cache.default.getSelected();\n    toast.info(\"Route Selected\", {\n      draggable: true,\n      position: toast.POSITION.TOP_CENTER,\n    });\n  }\n}*/\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n  }\n  handleSession = () => {\n    this.props.history.push(\"/home\");\n  };\n  state = {\n    render: 0,\n  };\n\n  render() {\n    /* setInterval(() => {\n      notificationsRecieved();\n    }, 2000);*/\n    setTimeout(() => {\n      if (this.state.render === 0)\n        this.setState({\n          render: 1,\n        });\n    }, 5000);\n    if (\n      window.performance &&\n      window.performance.navigation.type == 1 &&\n      window.location.href.charAt(window.location.href.length - 1) != \"/\"\n    ) {\n      return (\n        <Router>\n          <Redirect to=\"/\" />\n        </Router>\n      );\n    }\n\n    if (this.state.render > 0)\n      return (\n        <Fragment>\n          <ToastContainer\n            closeOnClick\n            draggable={true}\n            transition={Bounce}\n            autoClose={3200}\n          />\n\n          <Router>\n            <Fragment>\n              <Switch>\n                <Route exact path=\"/\" component={MainPage} />\n                <Route exact path=\"/login\" component={LoginPage} />\n                <Route exact path=\"/routes\" component={RoutesPage} />\n                <Route exact path=\"/friends-list\" component={FriendsPage} />\n                <Route exact path=\"/upload\" component={DropzonePage} />\n                <Route exact path=\"/about\" component={AboutPage} />\n                <Route\n                  exact\n                  path=\"/notifications\"\n                  component={NotificationsPage}\n                />\n                <Route exact path=\"/saveroute\" component={SaveRoutePage} />\n                <Route exact path=\"/gpx\" component={ImportGpxPage} />\n                <Route exact path=\"/groups\" component={FriendGroupsPage} />\n                <Route\n                  exact\n                  path=\"/groupdetails\"\n                  component={SeeFriendsOfGroupPage}\n                />\n                <Route\n                  exact\n                  path=\"/creategroup\"\n                  component={CreateFriendGroupPage}\n                />\n                <Route exact path=\"/shareroute\" component={ShareRoutePage} />\n              </Switch>\n            </Fragment>\n          </Router>\n        </Fragment>\n      );\n    else {\n      return (\n        <Fragment>\n          <video id=\"viadegif\" autoPlay muted>\n            <source src=\"videos/ViaDe.mp4\" type=\"video/mp4\" />\n          </video>\n        </Fragment>\n      );\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'assets/css/Index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}